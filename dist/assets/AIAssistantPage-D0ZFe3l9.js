import{j as e,U as M,D,l as E,F as R,ad as T,ae as I,af as q,ag as F,ah as P,_ as h,k as L,ai as O}from"./ui-vendor-BTHa3W3g.js";import{r as o}from"./react-vendor-a_rYd-gI.js";import{i as B,C as p,v as f,w as j,y as g,B as N,j as S}from"./index-CK_VcXmi.js";import{o as C,D as H,S as U}from"./DashboardLayout-D0U5gXbg.js";import{I as $}from"./input-DNUTw7Z-.js";import{T as G,a as V,b,c as w}from"./tabs-DxuSDT7T.js";import"./chart-vendor-CfBne3GF.js";import"./firebase-vendor-D8A9P6qX.js";import"./index-DRrHU6GR.js";const K=()=>{const{user:s}=B(),[d,t]=o.useState([]),[l,r]=o.useState(!1),[u,c]=o.useState(null);o.useEffect(()=>{s?.uid?m():t([])},[s?.uid]);const m=o.useCallback(async()=>{if(s?.uid)try{c(null);const i=await C.getRecentMessages(s.uid);t(i)}catch(i){c("Erro ao carregar mensagens"),console.error("Erro ao carregar mensagens:",i)}},[s?.uid]),n=o.useCallback(async i=>{if(!(!s?.uid||!i.trim())){r(!0),c(null);try{const a={id:`temp-${Date.now()}`,role:"user",content:i.trim(),timestamp:new Date,userId:s.uid};t(y=>[...y,a]);const k=await C.processUserMessage(s.uid,i.trim()),A={id:`temp-assistant-${Date.now()}`,role:"assistant",content:k,timestamp:new Date,userId:s.uid};t(y=>[...y,A]),await m()}catch(a){c("Erro ao enviar mensagem"),console.error("Erro ao enviar mensagem:",a)}finally{r(!1)}}},[s?.uid,m]),x=o.useCallback(async()=>{if(s?.uid)try{c(null),await C.clearConversationHistory(s.uid),t([])}catch(i){c("Erro ao limpar hist√≥rico"),console.error("Erro ao limpar hist√≥rico:",i)}},[s?.uid]),v=o.useCallback(()=>[{title:"Cadastrar Funcion√°rio",description:"Como adicionar um novo funcion√°rio?",action:()=>n("Como adicionar um novo funcion√°rio?")},{title:"Registrar Venda",description:"Como registrar uma venda?",action:()=>n("Como registrar uma venda?")},{title:"Definir Meta",description:"Como definir uma meta mensal?",action:()=>n("Como definir uma meta mensal?")},{title:"Gerar Relat√≥rio",description:"Como gerar relat√≥rios?",action:()=>n("Como gerar relat√≥rios?")},{title:"Configurar Plataforma",description:"Como adicionar uma plataforma?",action:()=>n("Como adicionar uma plataforma de vendas?")},{title:"Ajuda Geral",description:"Como funciona o sistema?",action:()=>n("Como funciona o sistema Optify?")}],[n]);return{messages:d,isLoading:l,error:u,sendMessage:n,clearHistory:x,loadMessages:m,getQuickActions:v,isAvailable:!!s?.uid}},Q=({onAction:s})=>{const d=[{title:"Cadastrar Funcion√°rio",description:"Adicionar novo colaborador ao sistema",icon:M,action:()=>s("Como adicionar um novo funcion√°rio?"),category:"Funcion√°rios"},{title:"Registrar Venda",description:"Registrar uma nova venda/transa√ß√£o",icon:D,action:()=>s("Como registrar uma venda?"),category:"Transa√ß√µes"},{title:"Definir Meta Mensal",description:"Configurar objetivo financeiro",icon:E,action:()=>s("Como definir uma meta mensal?"),category:"Metas"},{title:"Gerar Relat√≥rio",description:"Criar relat√≥rios financeiros",icon:R,action:()=>s("Como gerar relat√≥rios?"),category:"Relat√≥rios"},{title:"Adicionar Plataforma",description:"Configurar nova plataforma de vendas",icon:T,action:()=>s("Como adicionar uma plataforma de vendas?"),category:"Plataformas"},{title:"Ajuda Geral",description:"Entender como funciona o sistema",icon:I,action:()=>s("Como funciona o sistema Optify?"),category:"Sistema"}],t=Array.from(new Set(d.map(l=>l.category)));return e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{className:"text-lg",children:"A√ß√µes R√°pidas"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clique em uma a√ß√£o para obter ajuda espec√≠fica"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"space-y-6",children:t.map(l=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:l}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:d.filter(r=>r.category===l).map(r=>e.jsx(N,{variant:"outline",className:"h-auto p-4 justify-start text-left",onClick:r.action,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(r.icon,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:r.title}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:r.description})]})]})},r.title))})]},l))}),e.jsxs("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(S,{variant:"secondary",className:"text-xs",children:"üí° Dica"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Voc√™ tamb√©m pode digitar sua pergunta diretamente no chat. O assistente entende perguntas em portugu√™s e pode ajudar com qualquer opera√ß√£o do sistema."})]})]})]})};function ae(){const{messages:s,isLoading:d,sendMessage:t,clearHistory:l,getQuickActions:r}=K(),[u,c]=o.useState(""),[m,n]=o.useState(!1),x=()=>{u.trim()&&(t(u.trim()),c(""))},v=a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),x())},i=a=>a.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return e.jsx(H,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(q,{className:"h-8 w-8 text-primary"}),"Assistente AI"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Seu assistente pessoal para opera√ß√µes no sistema Optify"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",onClick:()=>n(!m),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),m?"Ocultar Chat":"Mostrar Chat"]}),e.jsxs(N,{variant:"outline",onClick:l,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Limpar Hist√≥rico"]})]})]}),e.jsxs(G,{defaultValue:"quick-actions",className:"space-y-4",children:[e.jsxs(V,{children:[e.jsx(b,{value:"quick-actions",children:"A√ß√µes R√°pidas"}),e.jsx(b,{value:"chat",children:"Chat Completo"}),e.jsx(b,{value:"help",children:"Ajuda"})]}),e.jsx(w,{value:"quick-actions",className:"space-y-4",children:e.jsx(Q,{onAction:t})}),e.jsx(w,{value:"chat",className:"space-y-4",children:e.jsxs(p,{className:"h-[600px] flex flex-col",children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5 text-primary"}),"Conversa com o Assistente"]})}),e.jsxs(g,{className:"flex-1 flex flex-col p-0",children:[e.jsx(U,{className:"flex-1 px-6",children:e.jsxs("div",{className:"space-y-4 py-4",children:[s.length===0&&e.jsxs("div",{className:"text-center text-muted-foreground py-12",children:[e.jsx(h,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Ol√°! Como posso ajud√°-lo?"}),e.jsx("p",{className:"text-sm",children:"Use as a√ß√µes r√°pidas ao lado ou digite sua pergunta abaixo"})]}),s.map(a=>e.jsxs("div",{className:`flex gap-3 ${a.role==="user"?"justify-end":"justify-start"}`,children:[a.role==="assistant"&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(h,{className:"h-4 w-4 text-primary"})})}),e.jsxs("div",{className:`max-w-[80%] ${a.role==="user"?"order-first":""}`,children:[e.jsx("div",{className:`rounded-lg px-4 py-3 ${a.role==="user"?"bg-primary text-primary-foreground ml-auto":"bg-muted"}`,children:e.jsx("div",{className:"whitespace-pre-wrap",children:a.content})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:i(a.timestamp)}),a.metadata?.operation&&e.jsx(S,{variant:"secondary",className:"text-xs",children:a.metadata.operation})]})]}),a.role==="user"&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:e.jsx(L,{className:"h-4 w-4 text-primary-foreground"})})})]},a.id)),d&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(h,{className:"h-4 w-4 text-primary"})})}),e.jsx("div",{className:"bg-muted rounded-lg px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Pensando..."})]})})]})]})}),e.jsxs("div",{className:"border-t p-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx($,{value:u,onChange:a=>c(a.target.value),onKeyPress:v,placeholder:"Digite sua pergunta sobre o sistema...",disabled:d,className:"flex-1"}),e.jsxs(N,{onClick:x,disabled:!u.trim()||d,className:"px-6",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Enviar"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Pressione Enter para enviar ‚Ä¢ Shift+Enter para nova linha"})]})]})]})}),e.jsx(w,{value:"help",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(p,{children:[e.jsx(f,{children:e.jsx(j,{children:"Como usar o Assistente"})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"üí¨ Chat Direto"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Digite perguntas em portugu√™s sobre qualquer funcionalidade do sistema."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"‚ö° A√ß√µes R√°pidas"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use os bot√µes de a√ß√µes r√°pidas para obter ajuda espec√≠fica sobre opera√ß√µes comuns."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"üß† Mem√≥ria Inteligente"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"O assistente lembra das suas √∫ltimas 10 mensagens para dar respostas mais contextuais."})]})]})]}),e.jsxs(p,{children:[e.jsx(f,{children:e.jsx(j,{children:"Exemplos de Perguntas"})}),e.jsxs(g,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Sobre Funcion√°rios:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:'‚Ä¢ "Como adicionar um funcion√°rio?"'}),e.jsx("li",{children:'‚Ä¢ "Como editar dados de um colaborador?"'}),e.jsx("li",{children:'‚Ä¢ "Como remover um funcion√°rio?"'})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Sobre Transa√ß√µes:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:'‚Ä¢ "Como registrar uma venda?"'}),e.jsx("li",{children:'‚Ä¢ "Como adicionar uma despesa?"'}),e.jsx("li",{children:'‚Ä¢ "Como filtrar transa√ß√µes?"'})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Sobre Sistema:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:'‚Ä¢ "Como funciona o sistema?"'}),e.jsx("li",{children:'‚Ä¢ "Como gerar relat√≥rios?"'}),e.jsx("li",{children:'‚Ä¢ "Como definir metas?"'})]})]})]})]})]})})]})]})})}export{ae as default};
