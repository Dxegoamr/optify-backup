import{U as n}from"./user-subcollections.service-B4HigrO8.js";import{A as u}from"./firebase-vendor-BUxvNq0f.js";const i="freeBetOperations",s="freeBetHistory";class E{static async createOperation(t,e,o,r=0){const a={platformName:e,platformColor:o,funcionarios:[],valorFreeBet:r};return n.addToUserSubcollection(t,i,a)}static async getOperations(t){return n.getAllFromUserSubcollection(t,i,[u("createdAt","desc")])}static async getOperation(t,e){return n.getFromUserSubcollection(t,i,e)}static async updateOperation(t,e,o){return n.updateUserSubcollection(t,i,e,o)}static async deleteOperation(t,e){return n.deleteFromUserSubcollection(t,i,e)}static async addHistoryEntry(t,e){return n.addToUserSubcollection(t,s,e)}static async getHistory(t){return n.getAllFromUserSubcollection(t,s,[u("closedAt","desc")])}static async updateHistoryEntry(t,e,o){return n.updateUserSubcollection(t,s,e,o)}static async deleteHistoryEntry(t,e){return n.deleteFromUserSubcollection(t,s,e)}static async addEmployee(t,e,o){const r=await this.getOperation(t,e);if(!r)throw new Error("Operação não encontrada");const a=[...r.funcionarios,o];return this.updateOperation(t,e,{funcionarios:a})}static async updateEmployee(t,e,o,r){const a=await this.getOperation(t,e);if(!a)throw new Error("Operação não encontrada");const c=a.funcionarios.map(l=>l.id===o?{...l,...r}:l);return this.updateOperation(t,e,{funcionarios:c})}static async removeEmployee(t,e,o){const r=await this.getOperation(t,e);if(!r)throw new Error("Operação não encontrada");const a=r.funcionarios.filter(c=>c.id!==o);return this.updateOperation(t,e,{funcionarios:a})}}export{E as F};
