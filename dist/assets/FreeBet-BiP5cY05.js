import{j as e,e as $,o as A,U as E,q as R,r as L,n as T,u as q,ac as V,P as H,i as P}from"./ui-vendor-CYAqJ0RG.js";import{r as p,u as Q}from"./react-vendor-a_rYd-gI.js";import{D as B}from"./DashboardLayout-B3XyjcMy.js";import{g as k,C as U,B as j,h as K,j as G}from"./index-LiAbW-2G.js";import{u as W,M as J,c as X,m as S}from"./proxy-C2pssEXW.js";import{D as Y,b as Z,c as ee,d as te,e as ae}from"./dialog-DkFBrAVQ.js";import{I as O}from"./input-J7GhaNSr.js";import{L as D}from"./label-DLesFRW0.js";import{F as M}from"./freebet.service-9e18y7QZ.js";import"./user-specific.service-C1DLMu9g.js";import"./user-subcollections.service-B4HigrO8.js";import"./firebase-vendor-BUxvNq0f.js";import"./user-notifications.service-CAzP-qxP.js";import"./index-DMSHDzho.js";import"./chart-vendor-ctXMAO2v.js";function se(a){const o=W(()=>X(a)),{isStatic:s}=p.useContext(J);if(s){const[,m]=p.useState(a);p.useEffect(()=>o.on("change",m),[])}return o}const re=({platform:a,index:o,activeIndex:s,onClick:m})=>{const n=o===s,r=o-s,g=Math.abs(r),h=t=>t?t.startsWith("#")&&(t.length===7||t.length===4)?t:`#${t.replace("#","").slice(0,6)}`:"#FF7F50",x=(t,i)=>{const w=h(t).replace("#",""),F=w.length===3?w.split("").map(f=>f+f).join(""):w.padEnd(6,"0"),C=parseInt(F,16),_=C>>16&255,z=C>>8&255,d=C&255;return`rgba(${_}, ${z}, ${d}, ${i})`},b=h(a.color),v=x(b,.35),N=x(b,.65),l=n?{x:0,scale:1,zIndex:10,opacity:1}:r>0?{x:Math.min(20+r*8,80),scale:Math.max(.9-r*.04,.7),zIndex:8-r,opacity:Math.max(.75-r*.1,.3)}:{x:Math.max(-20+r*8,-80),scale:Math.max(.9+r*.04,.7),zIndex:8+r,opacity:Math.max(.75+r*.1,.3)};return g<=3?e.jsx(S.div,{className:"absolute inset-0 flex items-center justify-center",initial:!1,animate:{x:`${l.x}%`,scale:l.scale,zIndex:l.zIndex,opacity:l.opacity},transition:{type:"spring",stiffness:300,damping:30,mass:.8},onClick:n?m:void 0,style:{cursor:n?"pointer":"default",pointerEvents:n?"auto":"none"},children:e.jsxs("div",{className:"relative w-full max-w-2xl px-4 sm:px-10",children:[e.jsx("div",{className:k("absolute inset-0 blur-3xl transition-all duration-500",n?"opacity-100":"opacity-0"),style:{background:`radial-gradient(circle at 50% 50%, ${v}, transparent 65%)`},"aria-hidden":"true"}),e.jsxs(U,{className:k("relative overflow-hidden border border-white/10 p-10 transition-all duration-300","shadow-[0_25px_70px_-30px_rgba(0,0,0,0.65)]",n?"scale-[1.02]":"translate-y-6 scale-[0.94] opacity-90",!n&&"cursor-default"),style:{background:`linear-gradient(145deg, ${x(b,.95)} 0%, ${N} 100%)`},children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(255,255,255,0.25)_0,transparent_55%)] mix-blend-screen"}),e.jsxs("div",{className:"relative space-y-8 text-white",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/60",children:"Operação FreeBet"}),e.jsx("h3",{className:"text-4xl font-black leading-tight drop-shadow-lg sm:text-5xl",children:a.name})]}),e.jsx("div",{className:k("flex h-14 w-14 items-center justify-center rounded-full border border-white/20 bg-white/10","backdrop-blur-md shadow-[0_10px_35px_-15px_rgba(0,0,0,0.5)]"),children:a.lucroPrejuizo>=0?e.jsx($,{className:"h-7 w-7 text-emerald-200"}):e.jsx(A,{className:"h-7 w-7 text-rose-200"})})]}),e.jsxs("div",{className:"grid gap-5 md:grid-cols-[2fr,3fr]",children:[e.jsxs("div",{className:"rounded-2xl border border-white/15 bg-white/10 p-6 backdrop-blur-sm",children:[e.jsxs("p",{className:"flex items-center gap-2 text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-white/70",children:[e.jsx(E,{className:"h-4 w-4"}),"Funcionários"]}),e.jsx("p",{className:"mt-4 text-4xl font-bold",children:a.employeeCount}),e.jsx("p",{className:"text-xs text-white/70",children:a.employeeCount===1?"Conta ativa":"Contas ativas"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-white/15 bg-white/10 p-5 backdrop-blur-sm",children:[e.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-white/70",children:"Total Apostado"}),e.jsxs("p",{className:"mt-3 text-2xl font-semibold",children:["R$ ",a.totalApostado.toFixed(2)]})]}),e.jsxs("div",{className:"rounded-2xl border border-white/15 bg-white/10 p-5 backdrop-blur-sm",children:[e.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-white/70",children:"Lucro / Prejuízo"}),e.jsxs("p",{className:k("mt-3 text-2xl font-bold",a.lucroPrejuizo>=0?"text-emerald-200":"text-rose-200"),children:[a.lucroPrejuizo>=0?"+":"","R$ ",a.lucroPrejuizo.toFixed(2)]})]})]})]}),n&&e.jsx(S.div,{className:"absolute bottom-6 left-1/2 -translate-x-1/2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsx("div",{className:"h-1 w-24 rounded-full bg-white/70 shadow-[0_8px_20px_rgba(0,0,0,0.25)]"})})]})]})]})}):null},oe=({platforms:a,onCardClick:o})=>{const[s,m]=p.useState(0),[n,r]=p.useState(0),g=p.useRef(null),h=se(0),x=50,b=()=>{r(s)},v=(l,c)=>{const t=c.offset.x,i=c.velocity.x;let u=s;(Math.abs(t)>x||Math.abs(i)>500)&&(t>0||i>0?u=Math.max(0,s-1):u=Math.min(a.length-1,s+1)),m(u),h.set(0)},N=()=>{s>0&&m(s-1)},y=()=>{s<a.length-1&&m(s+1)};return a.length===0?e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Nenhuma operação criada ainda"})}):e.jsxs("div",{className:"relative w-full overflow-visible pt-32 pb-16 sm:pt-36 sm:pb-20",style:{minHeight:"32rem"},ref:g,children:[s>0&&e.jsx(j,{variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 z-20 -translate-y-1/2 rounded-full bg-background/80 backdrop-blur-sm hover:bg-background",onClick:N,children:e.jsx(R,{className:"h-6 w-6"})}),s<a.length-1&&e.jsx(j,{variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 z-20 -translate-y-1/2 rounded-full bg-background/80 backdrop-blur-sm hover:bg-background",onClick:y,children:e.jsx(L,{className:"h-6 w-6"})}),e.jsx(S.div,{className:"relative h-full w-full",drag:"x",dragConstraints:g,dragElastic:.2,onDragStart:b,onDragEnd:v,style:{x:h},animate:{x:0},transition:{type:"spring",stiffness:300,damping:30},children:a.map((l,c)=>e.jsx(re,{platform:l,index:c,activeIndex:s,onClick:()=>o(l)},l.id))}),e.jsx("div",{className:"absolute bottom-4 left-1/2 z-20 flex -translate-x-1/2 gap-2",children:a.map((l,c)=>e.jsx("button",{onClick:()=>m(c),className:`
              h-2 w-2 rounded-full transition-all
              ${c===s?"w-8 bg-primary":"bg-primary/30"}
            `,"aria-label":`Ir para operação ${c+1}`},c))})]})},ne={Betano:"#FF6B35",Bet365:"#00D26A",Parimatch:"#FFD700",Blaze:"#FF0000","1xBet":"#0066CC",Betfair:"#003D82",Stake:"#0052FF",Betboo:"#00A859"},I=a=>ne[a]||"#6366F1",ye=()=>{const a=Q(),{user:o}=K(),s=T(),[m,n]=p.useState(!1),[r,g]=p.useState(""),[h,x]=p.useState("#6366F1"),{data:b=[],isLoading:v}=q({queryKey:["freebet-operations",o?.uid],queryFn:()=>M.getOperations(o?.uid||""),enabled:!!o?.uid}),y=b.map(t=>{const i=t.funcionarios||[],u=i.reduce((d,f)=>d+(f.valorApostado||0),0),F=i.find(d=>d.vencedor)?.retorno||0,_=i.filter(d=>!d.vencedor||d.vencedor&&d.vencedorRecebeFreebet===!0).reduce((d,f)=>d+(f.conversaoSaldo||0),0),z=F+_-u;return{id:t.id,name:t.platformName,color:t.platformColor,employeeCount:i.length,totalApostado:u,lucroPrejuizo:z,operationId:t.id}}),l=async()=>{if(!o?.uid||!r.trim()){P.error("Digite o nome da plataforma");return}try{const t=I(r),i=await M.createOperation(o.uid,r.trim(),t,0);s.invalidateQueries({queryKey:["freebet-operations",o.uid]}),P.success("Operação criada com sucesso!"),n(!1),g(""),x("#6366F1"),a(`/freebet/${i}`)}catch(t){P.error("Erro ao criar operação"),console.error(t)}},c=t=>{t.operationId&&a(`/freebet/${t.operationId}`)};return v?e.jsx(B,{children:e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})})}):e.jsxs(B,{children:[e.jsx("div",{className:"space-y-10",children:e.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-border/40 bg-gradient-to-br from-background via-background/95 to-background/80 px-6 py-10 shadow-[0_40px_120px_-45px_rgba(0,0,0,0.6)] sm:px-10 sm:py-12",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[e.jsx("div",{className:"absolute -top-24 -left-24 h-56 w-56 rounded-full bg-primary/20 blur-3xl"}),e.jsx("div",{className:"absolute top-1/3 right-0 h-64 w-64 rounded-full bg-primary/10 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-1/3 h-48 w-48 rounded-full bg-primary/5 blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(G,{className:"rounded-full bg-primary/10 px-4 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.35em] text-primary",children:"FreeBet"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white sm:text-4xl",children:"Gerencie suas operações de FreeBet"}),e.jsx("p",{className:"mt-2 max-w-2xl text-sm text-white/70 sm:text-base",children:"Controle em tempo real o desempenho das suas plataformas, visualize lucros e prejuízos e feche operações com poucos cliques."})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[e.jsxs(j,{variant:"outline",onClick:()=>a("/freebet/historico"),className:"border-white/30 bg-white/10 px-5 text-white hover:bg-white/20",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Histórico"]}),e.jsxs(j,{onClick:()=>n(!0),className:"bg-primary px-5 text-primary-foreground shadow-[0_20px_50px_-25px_rgba(234,88,12,0.7)] hover:bg-primary/90",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Nova Operação"]})]})]}),e.jsx("div",{className:"relative z-10 mt-10",children:e.jsx(oe,{platforms:y,onCardClick:c})})]})}),e.jsx(Y,{open:m,onOpenChange:n,children:e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsx(te,{children:"Nova Operação FreeBet"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"platform-name",children:"Nome da Plataforma"}),e.jsx(O,{id:"platform-name",value:r,onChange:t=>{const i=t.target.value;g(i);const u=I(i);u!=="#6366F1"&&x(u)},placeholder:"Ex: Betano, Bet365, Parimatch..."})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"platform-color",children:"Cor da Plataforma"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{id:"platform-color",type:"color",value:h,onChange:t=>x(t.target.value),className:"h-10 w-20"}),e.jsx(O,{type:"text",value:h,onChange:t=>x(t.target.value),placeholder:"#6366F1",className:"flex-1"})]})]})]}),e.jsxs(ae,{children:[e.jsx(j,{variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),e.jsx(j,{onClick:l,children:"Criar Operação"})]})]})})]})};export{ye as default};
