import{j as e,X as I,C,Z as T,S as q,e as B}from"./ui-vendor-CYAqJ0RG.js";import{r as i,u as D}from"./react-vendor-a_rYd-gI.js";import{B as z,i as V}from"./index-LiAbW-2G.js";import{M as W,i as G,u as U,P as H,a as K,b as X,L as Z,m as k}from"./proxy-C2pssEXW.js";function L(s,r){if(typeof s=="function")return s(r);s!=null&&(s.current=r)}function O(...s){return r=>{let t=!1;const a=s.map(o=>{const n=L(o,r);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let o=0;o<a.length;o++){const n=a[o];typeof n=="function"?n():L(s[o],null)}}}}function _(...s){return i.useCallback(O(...s),s)}class J extends i.Component{getSnapshotBeforeUpdate(r){const t=this.props.childRef.current;if(t&&r.isPresent&&!this.props.isPresent){const a=t.offsetParent,o=G(a)&&a.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=o-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Q({children:s,isPresent:r,anchorX:t,root:a}){const o=i.useId(),n=i.useRef(null),m=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=i.useContext(W),N=_(n,s?.ref);return i.useInsertionEffect(()=>{const{width:l,height:y,top:c,left:f,right:h}=m.current;if(r||!n.current||!l||!y)return;const g=t==="left"?`left: ${f}`:`right: ${h}`;n.current.dataset.motionPopId=o;const u=document.createElement("style");p&&(u.nonce=p);const b=a??document.head;return b.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${y}px !important;
            ${g}px !important;
            top: ${c}px !important;
          }
        `),()=>{b.contains(u)&&b.removeChild(u)}},[r]),e.jsx(J,{isPresent:r,childRef:n,sizeRef:m,children:i.cloneElement(s,{ref:N})})}const Y=({children:s,initial:r,isPresent:t,onExitComplete:a,custom:o,presenceAffectsLayout:n,mode:m,anchorX:p,root:N})=>{const l=U(ee),y=i.useId();let c=!0,f=i.useMemo(()=>(c=!1,{id:y,initial:r,isPresent:t,custom:o,onExitComplete:h=>{l.set(h,!0);for(const g of l.values())if(!g)return;a&&a()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[t,l,a]);return n&&c&&(f={...f}),i.useMemo(()=>{l.forEach((h,g)=>l.set(g,!1))},[t]),i.useEffect(()=>{!t&&!l.size&&a&&a()},[t]),m==="popLayout"&&(s=e.jsx(Q,{isPresent:t,anchorX:p,root:N,children:s})),e.jsx(H.Provider,{value:f,children:s})};function ee(){return new Map}const w=s=>s.key||"";function S(s){const r=[];return i.Children.forEach(s,t=>{i.isValidElement(t)&&r.push(t)}),r}const se=({children:s,custom:r,initial:t=!0,onExitComplete:a,presenceAffectsLayout:o=!0,mode:n="sync",propagate:m=!1,anchorX:p="left",root:N})=>{const[l,y]=K(m),c=i.useMemo(()=>S(s),[s]),f=m&&!l?[]:c.map(w),h=i.useRef(!0),g=i.useRef(c),u=U(()=>new Map),[b,$]=i.useState(c),[j,E]=i.useState(c);X(()=>{h.current=!1,g.current=c;for(let x=0;x<j.length;x++){const d=w(j[x]);f.includes(d)?u.delete(d):u.get(d)!==!0&&u.set(d,!1)}},[j,f.length,f.join("-")]);const P=[];if(c!==b){let x=[...c];for(let d=0;d<j.length;d++){const v=j[d],R=w(v);f.includes(R)||(x.splice(d,0,v),P.push(v))}return n==="wait"&&P.length&&(x=P),E(S(x)),$(c),null}const{forceRender:A}=i.useContext(Z);return e.jsx(e.Fragment,{children:j.map(x=>{const d=w(x),v=m&&!l?!1:c===j||f.includes(d),R=()=>{if(u.has(d))u.set(d,!0);else return;let M=!0;u.forEach(F=>{F||(M=!1)}),M&&(A?.(),E(g.current),m&&y?.(),a&&a())};return e.jsx(Y,{isPresent:v,initial:!h.current||t?void 0:!1,custom:r,presenceAffectsLayout:o,mode:n,root:N,onExitComplete:v?void 0:R,anchorX:p,children:x},d)})})},te=({isOpen:s,onClose:r,featureName:t="esta funcionalidade",requiredPlan:a="Premium"})=>{const o=D(),n=()=>{r(),o("/planos")};return e.jsx(se,{children:s&&e.jsxs(k.div,{className:"fixed inset-0 z-30 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(k.div,{className:"absolute inset-0 bg-background/80 backdrop-blur-sm",onClick:r,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsx(k.div,{className:"relative z-40 mx-4 ml-20 w-full max-w-[600px]",initial:{y:40,opacity:0,scale:.96},animate:{y:0,opacity:1,scale:1},exit:{y:20,opacity:0,scale:.96},transition:{type:"spring",stiffness:260,damping:22},children:e.jsxs("div",{className:"overflow-hidden rounded-lg border bg-background shadow-lg",children:[e.jsxs("div",{className:"relative bg-gradient-to-br from-primary/20 via-primary/10 to-background p-8",children:[e.jsx("button",{onClick:r,className:"absolute right-4 top-4 rounded-full p-2 transition-colors hover:bg-background/50",children:e.jsx(I,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{className:"flex flex-col items-center space-y-4 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/20 blur-xl"}),e.jsx("div",{className:"relative rounded-full bg-gradient-to-br from-primary to-primary/60 p-4",children:e.jsx(C,{className:"h-12 w-12 text-primary-foreground"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Funcionalidade Premium"}),e.jsxs("p",{className:"text-base text-muted-foreground",children:["Faça upgrade para desbloquear ",t]})]})]})]}),e.jsxs("div",{className:"space-y-6 p-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(T,{className:"h-5 w-5 text-primary"}),"Por que fazer upgrade?"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 rounded-lg bg-muted/50 p-3",children:[e.jsx(q,{className:"mt-0.5 h-5 w-5 flex-shrink-0 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Acesso completo"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Desbloqueie todas as funcionalidades avançadas"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 rounded-lg bg-muted/50 p-3",children:[e.jsx(B,{className:"mt-0.5 h-5 w-5 flex-shrink-0 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Mais produtividade"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie seu negócio com ferramentas profissionais"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 rounded-lg bg-muted/50 p-3",children:[e.jsx(C,{className:"mt-0.5 h-5 w-5 flex-shrink-0 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Recursos avançados"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Acesse funcionalidades exclusivas do sistema"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-lg border border-primary/20 bg-primary/10 p-4",children:[e.jsx(C,{className:"h-4 w-4 text-primary"}),e.jsxs("p",{className:"text-sm font-medium",children:["Necessário: ",e.jsx("span",{className:"font-bold text-primary",children:a})," ou superior"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(z,{variant:"outline",onClick:()=>o("/dashboard"),className:"flex-1",children:"Voltar"}),e.jsxs(z,{onClick:n,className:"flex-1 bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Ver Planos"]})]})]})]})})]})})},oe=({children:s,requiredFeature:r,featureName:t,requiredPlan:a="Premium"})=>{const{canAccess:o}=V(),[n,m]=i.useState(!1),p=o(r);return i.useEffect(()=>{p||m(!0)},[p]),p?e.jsx(e.Fragment,{children:s}):e.jsxs(e.Fragment,{children:[e.jsx(te,{isOpen:n,onClose:()=>m(!0),featureName:t,requiredPlan:a}),e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx("div",{className:"absolute inset-0 z-10 backdrop-blur-md bg-background/50"}),e.jsx("div",{className:"relative opacity-30 pointer-events-none",children:s})]})]})};export{oe as P};
