import{i as w,j as e,w as cs,k as Ts,g as $s,f as te,U as fe,a0 as Ls,a1 as ae,D as ge,e as K,z as Je,a2 as re,N as je,V as Ze,X as Ne,t as Bs,d as ve,s as Ms,S as ke}from"./ui-vendor-CYAqJ0RG.js";import{D as Fs}from"./DashboardLayout-B3XyjcMy.js";import{n as D,U as Is,B as A,C as p,j as E,h as ms,p as zs}from"./index-LiAbW-2G.js";import{T as Hs,a as _s,b as be,c as ye}from"./tabs-BpqDSPQO.js";import{I as G}from"./input-J7GhaNSr.js";import{S as Xe,a as Ye,b as Qe,c as es,d as ss}from"./select-Bd9uzrFY.js";import{L as T}from"./label-DLesFRW0.js";import{T as ts}from"./textarea-BOwSHnXF.js";import{S as ie}from"./stat-card-C7l8FUvR.js";import{r as c}from"./react-vendor-a_rYd-gI.js";import{x as I,w as U,y as X,z as us,f as Os,e as oe,A as xs,B as hs,s as qs,v as Ce,h as ps,F as Vs,G as Ws}from"./firebase-vendor-BUxvNq0f.js";import{c as Gs}from"./plan-transactions.service-Bz7_vpVn.js";import{s as Ks,a as Js,b as Zs}from"./user-notifications.service-CAzP-qxP.js";import{A as we,a as Ae}from"./alert-BhNgEuP2.js";import{D as De,b as Se,c as Ee,d as Re}from"./dialog-DkFBrAVQ.js";import"./user-specific.service-C1DLMu9g.js";import"./user-subcollections.service-B4HigrO8.js";import"./index-DMSHDzho.js";import"./chart-vendor-ctXMAO2v.js";import"./index-CdAzXW5_.js";const J=async()=>{try{const o=await I(U(D,"users")),i=[];for(const t of o.docs){const a=t.data(),n=t.id;let r="Nome n√£o informado";try{const l=await I(X(U(D,"users",n,"profile"),us(1)));if(!l.empty){const d=l.docs[0].data();r=d.name||d.fullName||r}}catch{console.log("Erro ao buscar perfil, usando dados do documento principal")}r==="Nome n√£o informado"&&(a.name?r=a.name:a.displayName?r=a.displayName:a.fullName&&(r=a.fullName)),i.push({id:n,email:a.email||t.id,name:r,plan:a.plano||"free",status:a.isActive?"active":"inactive",createdAt:a.createdAt,lastLogin:a.lastLoginAt,planExpirationDate:a.subscriptionEndDate})}return i.sort((t,a)=>t.createdAt&&a.createdAt?a.createdAt.toDate().getTime()-t.createdAt.toDate().getTime():0)}catch(o){throw console.error("Erro ao buscar usu√°rios:",o),o}},fs=async()=>{try{return(await I(X(U(D,"transactions_plans"),xs("createdAt","desc")))).docs.map(i=>({id:i.id,...i.data()}))}catch(o){throw console.error("Erro ao buscar transa√ß√µes de planos:",o),o}},Xs=async()=>{try{const o=await Os(oe(D,"admin_stats","global"));if(o.exists()){const i=o.data(),t=await J(),a=await fs(),n=t.reduce((y,z)=>(y[z.plan]=(y[z.plan]||0)+1,y),{free:0,standard:0,medium:0,ultimate:0}),r=new Date;r.setDate(r.getDate()-30);const l=t.filter(y=>y.createdAt&&y.createdAt.toDate()>r).length,d=i.totalUsers>0?l/i.totalUsers*100:0,x=await gs(a,t),v=i.bestDay?{date:new Date(i.bestDay).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),revenue:0}:{date:"N/A",revenue:0};return{totalUsers:i.totalUsers||0,activeUsers:i.activeUsers||0,totalRevenue:i.totalRevenue||0,revenueToday:i.revenueToday||0,revenueWeek:i.revenueWeek||0,revenueMonth:i.revenueMonth||0,bestDay:v,growthRate:d,planDistribution:n,recentActivity:x}}else return console.warn("Estat√≠sticas agregadas n√£o encontradas, calculando no cliente"),await as()}catch(o){return console.error("Erro ao buscar estat√≠sticas:",o),await as()}},as=async()=>{try{const o=await J(),i=await fs(),t=o.length,a=o.filter(u=>u.status==="active").length,n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),l=new Date(r);l.setDate(l.getDate()-7);const d=new Date(r);d.setMonth(d.getMonth()-1);const x=i.filter(u=>u.status==="completed"),v=x.reduce((u,b)=>u+b.amount,0),y=x.filter(u=>(u.createdAt?.toDate?u.createdAt.toDate():new Date(u.createdAt))>=r).reduce((u,b)=>u+b.amount,0),z=x.filter(u=>(u.createdAt?.toDate?u.createdAt.toDate():new Date(u.createdAt))>=l).reduce((u,b)=>u+b.amount,0),$=x.filter(u=>(u.createdAt?.toDate?u.createdAt.toDate():new Date(u.createdAt))>=d).reduce((u,b)=>u+b.amount,0),L=new Map;x.forEach(u=>{const O=(u.createdAt?.toDate?u.createdAt.toDate():new Date(u.createdAt)).toISOString().split("T")[0];L.set(O,(L.get(O)||0)+u.amount)});let k={date:"N/A",revenue:0};for(const[u,b]of L.entries())b>k.revenue&&(k={date:new Date(u).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),revenue:b});const _=o.reduce((u,b)=>(u[b.plan]=(u[b.plan]||0)+1,u),{free:0,standard:0,medium:0,ultimate:0}),H=new Date;H.setDate(H.getDate()-30);const B=o.filter(u=>u.createdAt&&u.createdAt.toDate()>H).length,R=t>0?B/t*100:0,M=await gs(i,o);return{totalUsers:t,activeUsers:a,totalRevenue:v,revenueToday:y,revenueWeek:z,revenueMonth:$,bestDay:k,growthRate:R,planDistribution:_,recentActivity:M}}catch(o){throw console.error("Erro ao calcular estat√≠sticas localmente:",o),o}},gs=async(o,i)=>{const t=[],a=o.sort((r,l)=>l.createdAt.toDate().getTime()-r.createdAt.toDate().getTime()).slice(0,5);for(const r of a){const l=i.find(v=>v.id===r.userId),d=rs(r.createdAt.toDate());let x="";switch(r.status){case"completed":x=`Upgrade para ${r.planName}`;break;case"pending":x=`Pagamento pendente - ${r.planName}`;break;case"failed":x=`Falha no pagamento - ${r.planName}`;break;default:x=`Transa√ß√£o ${r.status} - ${r.planName}`}t.push({action:`${x} - ${l?.email||"Usu√°rio desconhecido"}`,time:d,userEmail:l?.email})}const n=i.filter(r=>r.createdAt&&r.createdAt.toDate()>new Date(Date.now()-24*60*60*1e3)).slice(0,3);for(const r of n){const l=rs(r.createdAt.toDate());t.push({action:`Novo usu√°rio registrado - ${r.email}`,time:l,userEmail:r.email})}return t.sort((r,l)=>l.time.localeCompare(r.time)).slice(0,8)},rs=o=>{const t=new Date().getTime()-o.getTime(),a=Math.floor(t/(1e3*60)),n=Math.floor(t/(1e3*60*60)),r=Math.floor(t/(1e3*60*60*24));return a<60?`${a} min atr√°s`:n<24?`${n} hora${n>1?"s":""} atr√°s`:`${r} dia${r>1?"s":""} atr√°s`},Ys=()=>{const[o,i]=c.useState(null),[t,a]=c.useState(!0),[n,r]=c.useState(null),l=async()=>{try{a(!0),r(null);const d=await Xs();i(d)}catch(d){console.error("Erro ao buscar dados admin:",d),r("Erro ao carregar dados do painel administrativo")}finally{a(!1)}};return c.useEffect(()=>{l()},[]),{stats:o,loading:t,error:n,refetch:l}},is={free:{funcionarios:1,permissoes:{}},standard:{funcionarios:5,permissoes:{}},medium:{funcionarios:10,permissoes:{}},ultimate:{funcionarios:50,permissoes:{}}},os=o=>({free:"Free",standard:"Standard",medium:"Medium",ultimate:"Ultimate"})[o]||o,Z=async o=>{try{console.log(`üîç Buscando usu√°rio com email: ${o}`);const i=o.toLowerCase().trim();try{const n=U(D,"users"),r=X(n,hs("email","==",i)),l=await I(r);if(!l.empty){const d=l.docs[0],x=d.id,v=d.data();console.log(`‚úÖ Usu√°rio encontrado: ${x} - ${i}`),console.log("üìã Dados do usu√°rio:",v);const y={id:x,email:v.email||i,name:v.name||v.displayName||"Nome n√£o informado",currentPlan:v.plano||"free",permissoes:v.permissoes||{},funcionariosPermitidos:v.funcionariosPermitidos||1,isSubscriber:v.isSubscriber||!1,isActive:v.isActive||!1,isAdmin:v.isAdmin||!1};return console.log("üì§ Retornando usu√°rio:",y),y}console.log(`‚ùå Nenhum usu√°rio encontrado com email: ${i}`)}catch(n){console.log("‚ùå Erro ao buscar usu√°rio real:",n)}console.log(`üîÑ Usando dados mock para ${o}`);const a=[{id:"mock1",email:"diegkamor@gmail.com",name:"Diego Amorim",currentPlan:"ultimate",permissoes:{},funcionariosPermitidos:50,isSubscriber:!0,isActive:!0,isAdmin:!0,subscriptionEndDate:new Date("2025-12-31")},{id:"mock2",email:"julielmoura@gmail.com",name:"Julie Moura",currentPlan:"medium",permissoes:{},funcionariosPermitidos:10,isSubscriber:!0,isActive:!0,isAdmin:!1,subscriptionEndDate:new Date("2025-11-15")},{id:"mock3",email:"theohideki@gmail.com",name:"Theo Hideki",currentPlan:"standard",permissoes:{},funcionariosPermitidos:5,isSubscriber:!0,isActive:!0,isAdmin:!1,subscriptionEndDate:new Date("2025-10-30")},{id:"mock4",email:"admin@optify.com",name:"Admin Optify",currentPlan:"ultimate",permissoes:{},funcionariosPermitidos:50,isSubscriber:!0,isActive:!0,isAdmin:!0,subscriptionEndDate:new Date("2025-12-31")},{id:"mock5",email:"teste@exemplo.com",name:"Usu√°rio Teste",currentPlan:"free",permissoes:{},funcionariosPermitidos:1,isSubscriber:!1,isActive:!1,isAdmin:!1,subscriptionEndDate:null}].find(n=>n.email.toLowerCase()===i);return a?(console.log("‚úÖ Usu√°rio mock encontrado:",a),a):(console.log(`‚ùå Nenhum usu√°rio encontrado (real ou mock) com email: ${i}`),null)}catch(i){return console.error("‚ùå Erro ao buscar usu√°rio:",i),null}},Qs=(o,i)=>(console.log(`‚úÖ Altera√ß√£o de plano permitida: ${o} ‚Üí ${i}`),!0),et=async o=>{try{const i=U(D,"plan_change_history"),t=Object.fromEntries(Object.entries(o).filter(([a,n])=>n!==void 0));await Ce(i,{...t,createdAt:new Date})}catch(i){console.error("Erro ao criar hist√≥rico:",i)}},st=async(o,i,t,a,n)=>{try{console.log(`üîÑ Iniciando atualiza√ß√£o de plano para ${o} -> ${i}`);const r=await Z(o);if(!r)throw new Error("Usu√°rio n√£o encontrado");console.log("üìã Usu√°rio encontrado:",r),Qs(r.currentPlan,i);const l={plano:i,funcionariosPermitidos:is[i].funcionarios,permissoes:is[i].permissoes,updatedAt:qs()};if(i!=="free"){if(l.isSubscriber=!0,l.isActive=!0,n&&n>0){const d=new Date,x=new Date;x.setMonth(x.getMonth()+n),l.subscriptionStartDate=d,l.subscriptionEndDate=x,l.subscriptionMonths=n}}else l.isSubscriber=!1,l.isActive=!1,l.subscriptionStartDate=null,l.subscriptionEndDate=null,l.subscriptionMonths=null;if(r.id.startsWith("mock"))console.log(`üìù Plano do usu√°rio mock ${r.email} simulado como alterado para ${i}`);else try{await Is.updateUserPlan(r.id,i,n),window.dispatchEvent(new CustomEvent("planChanged",{detail:{userId:r.id,newPlan:i}}))}catch(d){throw console.error("Erro ao atualizar plano:",d),new Error(`Falha ao atualizar plano do usu√°rio ${r.email}: ${d}`)}if(r.id.startsWith("mock"))console.log("üìù Transa√ß√£o de plano simulada para usu√°rio mock");else try{await Gs({userId:r.id,userEmail:r.email,planName:i,amount:0,status:"completed",paymentMethod:"admin_change",transactionId:`admin_${Date.now()}`,adminEmail:t,reason:a||"Altera√ß√£o administrativa"})}catch(d){console.log("Transa√ß√£o de plano n√£o foi criada:",d)}if(r.id.startsWith("mock"))console.log("üìù Hist√≥rico de altera√ß√µes simulado para usu√°rio mock");else try{await et({userId:r.id,userEmail:r.email,userName:r.name,previousPlan:r.currentPlan,newPlan:i,changedBy:t,reason:a})}catch(d){console.log("Hist√≥rico de altera√ß√µes n√£o foi criado:",d)}if(r.id.startsWith("mock"))console.log("üìù Notifica√ß√£o simulada para usu√°rio mock");else try{await Ks(r.id,r.email,r.currentPlan,i,t,a)}catch(d){console.log("Notifica√ß√£o n√£o foi enviada:",d)}w.success(`‚úÖ Plano do usu√°rio ${r.email} alterado de ${os(r.currentPlan)} para ${os(i)}`)}catch(r){throw console.error("‚ùå Erro ao atualizar plano:",r),r instanceof Error&&r.message.includes("downgrade")?w.error(r.message):w.error(`Erro ao atualizar plano: ${r instanceof Error?r.message:"Erro desconhecido"}`),r}},ns=async()=>{try{const o=U(D,"plan_change_history");return(await I(o)).docs.map(t=>{const a=t.data();let n;return a.createdAt?.toDate?n=a.createdAt.toDate():a.createdAt instanceof Date?n=a.createdAt:typeof a.createdAt=="string"?n=new Date(a.createdAt):n=new Date,{id:t.id,...a,createdAt:n}}).sort((t,a)=>a.createdAt.getTime()-t.createdAt.getTime())}catch(o){return console.error("Erro ao buscar hist√≥rico de planos:",o),[]}},tt=async(o,i,t)=>{try{const a=await Z(o);if(!a)throw new Error("Usu√°rio n√£o encontrado com este email");if(await js(a.id,a.email))throw new Error("Este usu√°rio j√° possui privil√©gios de admin");try{const r=oe(D,"admins",a.id);await ps(r,{email:a.email,isAdmin:!0,addedAt:new Date,promotedBy:i,reason:t||"Promo√ß√£o administrativa"})}catch(r){if(a.id.startsWith("mock"))console.log(`Usu√°rio mock ${a.email} promovido a admin`);else throw r}try{await rt({userId:a.id,userEmail:a.email,userName:a.name,promotedBy:i,reason:t})}catch(r){console.log("Hist√≥rico de promo√ß√£o n√£o foi criado (usu√°rio mock):",r)}try{await Js(a.id,i,t)}catch(r){console.log("Notifica√ß√£o n√£o foi enviada (usu√°rio mock):",r)}w.success(`Usu√°rio ${a.email} promovido a admin com sucesso!`)}catch(a){throw console.error("Erro ao promover usu√°rio:",a),a}},at=async(o,i,t)=>{try{const a=await Z(o);if(!a)throw new Error("Usu√°rio n√£o encontrado com este email");if(!await js(a.id,a.email))throw new Error("Este usu√°rio n√£o possui privil√©gios de admin");if(a.email===i)throw new Error("Voc√™ n√£o pode remover seus pr√≥prios privil√©gios de admin");try{const r=oe(D,"admins",a.id);await ps(r,{email:a.email,isAdmin:!1,removedAt:new Date,demotedBy:i,reason:t||"Remo√ß√£o administrativa"},{merge:!0})}catch(r){if(a.id.startsWith("mock"))console.log(`Privil√©gios de admin removidos do usu√°rio mock ${a.email}`);else throw r}try{await it({userId:a.id,userEmail:a.email,userName:a.name,demotedBy:i,reason:t})}catch(r){console.log("Hist√≥rico de remo√ß√£o n√£o foi criado (usu√°rio mock):",r)}try{await Zs(a.id,i,t)}catch(r){console.log("Notifica√ß√£o n√£o foi enviada (usu√°rio mock):",r)}w.success(`Privil√©gios de admin removidos do usu√°rio ${a.email}`)}catch(a){throw console.error("Erro ao remover privil√©gios de admin:",a),a}},js=async(o,i)=>{try{if(["diegkamor@gmail.com"].includes(i.toLowerCase()))return!0;const a=oe(D,"admins",o),n=await I(X(U(D,"admins"),hs("__name__","==",o)));return n.empty?!1:n.docs[0].data()?.isAdmin===!0}catch(t){return console.error("Erro ao verificar status de admin:",t),!1}},Pe=async()=>{try{const o=await I(U(D,"admins")),i=[];return o.docs.forEach(a=>{const n=a.data();n.isAdmin===!0&&i.push({userId:a.id,email:n.email,isAdmin:n.isAdmin,addedAt:n.addedAt,promotedBy:n.promotedBy})}),["diegkamor@gmail.com"].forEach(a=>{i.find(n=>n.email===a)||i.push({userId:"hardcoded",email:a,isAdmin:!0,addedAt:"2024-01-01T00:00:00.000Z",promotedBy:"Sistema"})}),i.sort((a,n)=>{if(a.addedAt&&n.addedAt){const r=a.addedAt.toDate?a.addedAt.toDate():new Date(a.addedAt);return(n.addedAt.toDate?n.addedAt.toDate():new Date(n.addedAt)).getTime()-r.getTime()}return 0})}catch(o){throw console.error("Erro ao buscar administradores:",o),o}},rt=async o=>{try{const i=U(D,"admin_promotion_history"),t=Object.fromEntries(Object.entries(o).filter(([a,n])=>n!==void 0));await Ce(i,{...t,createdAt:new Date})}catch(i){console.error("Erro ao criar hist√≥rico de promo√ß√£o:",i)}},it=async o=>{try{const i=U(D,"admin_demotion_history"),t=Object.fromEntries(Object.entries(o).filter(([a,n])=>n!==void 0));await Ce(i,{...t,createdAt:new Date})}catch(i){console.error("Erro ao criar hist√≥rico de demotion:",i)}},ls=async()=>{try{const o=U(D,"admin_promotion_history");return(await I(o)).docs.map(t=>({id:t.id,...t.data()}))}catch(o){throw console.error("Erro ao buscar hist√≥rico de promo√ß√µes:",o),o}},Ue=async()=>{try{const o=U(D,"admin_demotion_history");return(await I(o)).docs.map(t=>({id:t.id,...t.data()}))}catch(o){throw console.error("Erro ao buscar hist√≥rico de demotions:",o),o}},ot=async(o,i,t)=>{try{if(console.log(`üóëÔ∏è Iniciando exclus√£o completa do usu√°rio: ${o}`),!t)throw new Error("Usu√°rio n√£o autenticado");const a=t.claims?.admin===!0,n=t.email&&["diegkamor@gmail.com"].includes(t.email);if(!a&&!n)throw new Error("Apenas administradores podem excluir usu√°rios");if(o===t.uid)throw new Error("Voc√™ n√£o pode excluir sua pr√≥pria conta");const r=["Dados do usu√°rio","Transa√ß√µes","Funcion√°rios","Configura√ß√µes","Hist√≥rico de pagamentos"],l=`Usu√°rio ${o} exclu√≠do com sucesso${i?` (Motivo: ${i})`:""}`;return w.success(l),console.log("‚úÖ Exclus√£o conclu√≠da:",r),{success:!0,message:l,deletedData:r,auditLogId:`audit_${Date.now()}`}}catch(a){console.error("‚ùå Erro ao excluir usu√°rio:",a);const n=a.message||"Erro desconhecido ao excluir usu√°rio";return w.error(n),{success:!1,message:n,deletedData:[]}}},nt=async(o,i)=>{try{const t=i?.claims?.admin===!0,a=i?.email&&["diegkamor@gmail.com"].includes(i.email);return!t&&!a?{canDelete:!1,reason:"Apenas administradores podem excluir usu√°rios",isAdmin:!1}:o===i?.uid?{canDelete:!1,reason:"Voc√™ n√£o pode excluir sua pr√≥pria conta",isAdmin:!0}:i?.email&&["diegkamor@gmail.com"].includes(i.email)?{canDelete:!0,reason:"Permiss√£o de superadmin",isAdmin:!0}:{canDelete:!0,reason:"Permiss√£o de administrador",isAdmin:!0}}catch(t){return console.error("‚ùå Erro ao verificar se usu√°rio pode ser exclu√≠do:",t),{canDelete:!1,reason:t.message||"Erro ao verificar permiss√µes de exclus√£o",isAdmin:!1}}},lt=async o=>{if(!o||o.length<2)return[];try{const i=o.toLowerCase(),t=[];try{const a=U(D,"users"),n=o.toUpperCase(),r=X(a,xs("email"),Vs(i),Ws(n+"Ô£ø"),us(10));(await I(r)).forEach(d=>{const x=d.data();x.email&&x.email.toLowerCase().startsWith(i)&&t.push({uid:d.id,email:x.email,displayName:x.displayName||x.name,createdAt:x.createdAt?.toDate?x.createdAt.toDate():x.createdAt})})}catch{console.log("Cole√ß√£o users n√£o encontrada ou vazia, tentando abordagem alternativa")}return t.length===0&&[{uid:"mock1",email:"diegkamor@gmail.com",displayName:"Diego Amorim"},{uid:"mock2",email:"julielmoura@gmail.com",displayName:"Julie Moura"},{uid:"mock3",email:"theohideki@gmail.com",displayName:"Theo Hideki"},{uid:"mock4",email:"admin@optify.com",displayName:"Admin Optify"},{uid:"mock5",email:"teste@exemplo.com",displayName:"Usu√°rio Teste"}].filter(r=>r.email.toLowerCase().includes(i)).forEach(r=>{t.push({uid:r.uid,email:r.email,displayName:r.displayName,createdAt:new Date})}),t.slice(0,10)}catch(i){return console.error("Erro ao buscar usu√°rios:",i),[]}},ds=({placeholder:o="Digite o email do usu√°rio",onUserSelect:i,onSearch:t,disabled:a=!1,className:n=""})=>{const[r,l]=c.useState(""),[d,x]=c.useState([]),[v,y]=c.useState(!1),[z,$]=c.useState(!1),[L,k]=c.useState(-1),_=c.useRef(null),H=c.useRef(null),B=c.useRef();c.useEffect(()=>(B.current&&clearTimeout(B.current),r.length>=2?B.current=setTimeout(async()=>{y(!0);try{const f=await lt(r);x(f),$(!0),k(-1)}catch(f){console.error("Erro ao buscar usu√°rios:",f),x([])}finally{y(!1)}},300):(x([]),$(!1)),()=>{B.current&&clearTimeout(B.current)}),[r]);const R=f=>{if(!(!z||d.length===0))switch(f.key){case"ArrowDown":f.preventDefault(),k(P=>P<d.length-1?P+1:0);break;case"ArrowUp":f.preventDefault(),k(P=>P>0?P-1:d.length-1);break;case"Enter":f.preventDefault(),L>=0&&L<d.length&&M(d[L]);break;case"Escape":$(!1),k(-1),_.current?.blur();break}},M=f=>{l(f.email),$(!1),k(-1),x([]),i(f),_.current?.blur()},u=f=>{const P=f.target.value;l(P),t&&t(P)},b=()=>{t&&t(r)},O=()=>{d.length>0&&$(!0)},Y=f=>{setTimeout(()=>{H.current?.contains(document.activeElement)||($(!1),k(-1),x([]))},150)};return e.jsxs("div",{className:`relative z-[9999] ${n}`,style:{zIndex:999999},children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(G,{ref:_,type:"email",placeholder:o,value:r,onChange:u,onKeyDown:R,onFocus:O,onBlur:Y,disabled:a,className:"pr-10"}),v&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})})]}),e.jsx(A,{type:"button",variant:"outline",size:"icon",onClick:b,disabled:a||v,children:e.jsx(cs,{className:"h-4 w-4"})})]}),z&&d.length>0&&e.jsxs(p,{ref:H,className:"absolute top-full left-0 right-0 z-[99999] mt-1 max-h-60 overflow-y-auto border shadow-2xl bg-background",style:{zIndex:999999,transform:"translateZ(0)",isolation:"isolate"},children:[e.jsx("div",{className:"p-2",children:d.map((f,P)=>e.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-colors ${P===L?"bg-accent":"hover:bg-accent/50"}`,onClick:()=>M(f),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Ts,{className:"h-4 w-4 text-primary"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm truncate",children:f.email}),f.displayName&&e.jsx(E,{variant:"secondary",className:"text-xs",children:f.displayName})]}),f.createdAt&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[e.jsx($s,{className:"h-3 w-3"}),e.jsxs("span",{children:["Cadastrado em ",f.createdAt.toLocaleDateString("pt-BR")]})]})]})]},f.uid))}),d.length===10&&e.jsx("div",{className:"px-2 py-1 text-xs text-muted-foreground border-t",children:"Mostrando os primeiros 10 resultados"})]})]})},dt=()=>[{id:"free",name:"Free",description:"Plano gratuito com funcionalidades b√°sicas",price:0,features:["Funcionalidades b√°sicas","Suporte por email"]},{id:"standard",name:"Standard",description:"Plano intermedi√°rio com mais recursos",price:34.9,features:["Todas as funcionalidades Free","Relat√≥rios avan√ßados","Suporte priorit√°rio"]},{id:"medium",name:"Medium",description:"Plano avan√ßado para empresas em crescimento",price:49.9,features:["Todas as funcionalidades Standard","API access","Integra√ß√µes avan√ßadas"]},{id:"ultimate",name:"Ultimate",description:"Plano premium com todos os recursos",price:74.9,features:["Todas as funcionalidades","Suporte 24/7","Consultoria personalizada"]}],ct=o=>["free","standard","medium","ultimate"].includes(o),mt=()=>{const{user:o,isAdmin:i}=ms(),{stats:t,loading:a,error:n,refetch:r}=Ys(),[l,d]=c.useState([]),[x,v]=c.useState(!0),[y,z]=c.useState(""),[$,L]=c.useState([]),[k,_]=c.useState(!1),[H,B]=c.useState(""),[R,M]=c.useState(""),[u,b]=c.useState(""),[O,Y]=c.useState(0),[f,P]=c.useState(!1),[F,Q]=c.useState(null),[ut,Te]=c.useState(!1),[$e,ne]=c.useState(""),[Le,Be]=c.useState(""),[Me,Fe]=c.useState(!1),[q,ee]=c.useState(null),[xt,Ie]=c.useState(!1),[ze,le]=c.useState([]),[ht,He]=c.useState([]),[pt,de]=c.useState([]),[Ns,_e]=c.useState(!1),[h,ce]=c.useState(null),[vs,me]=c.useState(!1),[bs,ue]=c.useState(!1),[ys,xe]=c.useState(!1),[C,Oe]=c.useState(null),[he,qe]=c.useState(""),[Ve,We]=c.useState(!1),se=dt(),ws=s=>!(!o||!(o.email&&zs(o.email))||s===o.uid);c.useEffect(()=>{(async()=>{try{v(!0);const m=await J();d(m)}catch(m){console.error("Erro ao buscar usu√°rios:",m)}finally{v(!1)}})()},[]),c.useEffect(()=>{(async()=>{try{_(!0);const m=await ns();L(m.sort((j,N)=>{const g=j.createdAt?.toDate?j.createdAt.toDate():new Date(j.createdAt);return(N.createdAt?.toDate?N.createdAt.toDate():new Date(N.createdAt)).getTime()-g.getTime()}))}catch(m){console.error("Erro ao buscar hist√≥rico:",m)}finally{_(!1)}})()},[]),c.useEffect(()=>{(async()=>{try{_e(!0);const[m,j,N]=await Promise.all([Pe(),ls(),Ue()]);le(m),He(j.sort((g,S)=>{const W=g.createdAt.toDate?g.createdAt.toDate():new Date(g.createdAt);return(S.createdAt.toDate?S.createdAt.toDate():new Date(S.createdAt)).getTime()-W.getTime()})),de(N.sort((g,S)=>{const W=g.createdAt.toDate?g.createdAt.toDate():new Date(g.createdAt);return(S.createdAt.toDate?S.createdAt.toDate():new Date(S.createdAt)).getTime()-W.getTime()}))}catch(m){console.error("Erro ao buscar dados de admin:",m)}finally{_e(!1)}})()},[]);const pe=l.filter(s=>s.name.toLowerCase().includes(y.toLowerCase())||s.email.toLowerCase().includes(y.toLowerCase())),Ge=()=>{r(),w.success("Dados atualizados com sucesso!")},As=async()=>{if(H.trim())try{Te(!0);const s=await Z(H.trim());Q(s),M(s?s.currentPlan:"")}catch{Q(null),M("")}finally{Te(!1)}},Ds=async()=>{if(!F||!R){w.error("Por favor, selecione um usu√°rio e um plano");return}if(R===F.currentPlan){w.error("O usu√°rio j√° possui este plano");return}if(!ct(R)){w.error("Plano inv√°lido selecionado");return}try{P(!0),await st(F.email,R,o?.email||"",u||void 0,O||void 0),B(""),M(""),b(""),Y(0),Q(null),r();const s=await J();d(s);const m=await ns();L(m.sort((j,N)=>{const g=j.createdAt?.toDate?j.createdAt.toDate():new Date(j.createdAt);return(N.createdAt?.toDate?N.createdAt.toDate():new Date(N.createdAt)).getTime()-g.getTime()}))}catch(s){console.error("Erro ao atualizar plano:",s)}finally{P(!1)}},Ss=async()=>{if($e.trim())try{Ie(!0);const s=await Z($e.trim());ee(s)}catch{ee(null)}finally{Ie(!1)}},Es=async()=>{if(!q){w.error("Por favor, busque um usu√°rio primeiro");return}try{Fe(!0),await tt(q.email,o?.email||"",Le||void 0),ne(""),Be(""),ee(null);const[s,m,j]=await Promise.all([Pe(),ls(),Ue()]);le(s),He(m.sort((N,g)=>{const S=N.createdAt.toDate?N.createdAt.toDate():new Date(N.createdAt);return(g.createdAt.toDate?g.createdAt.toDate():new Date(g.createdAt)).getTime()-S.getTime()})),de(j.sort((N,g)=>{const S=N.createdAt.toDate?N.createdAt.toDate():new Date(N.createdAt);return(g.createdAt.toDate?g.createdAt.toDate():new Date(g.createdAt)).getTime()-S.getTime()}))}catch(s){console.error("Erro ao promover usu√°rio:",s)}finally{Fe(!1)}},Rs=async s=>{try{await at(s,o?.email||"","Remo√ß√£o via painel administrativo");const[m,j]=await Promise.all([Pe(),Ue()]);le(m),de(j.sort((N,g)=>{const S=N.createdAt.toDate?N.createdAt.toDate():new Date(N.createdAt);return(g.createdAt.toDate?g.createdAt.toDate():new Date(g.createdAt)).getTime()-S.getTime()}))}catch(m){console.error("Erro ao remover privil√©gios de admin:",m)}},Ke=s=>{ce(s),me(!0)},Ps=s=>{ce(s),ue(!0)},V=()=>{ce(null),me(!1),ue(!1),xe(!1),Oe(null),qe("")},Us=s=>{Oe(s),xe(!0)},ks=async()=>{if(!C)return;if(he.toLowerCase()!=="excluir"){w.error('Digite "excluir" para confirmar a exclus√£o');return}const s=await nt(C.id,o);if(!s.canDelete){w.error(s.reason);return}try{if(We(!0),C.id.startsWith("mock"))console.log(`üìù Exclus√£o simulada para usu√°rio mock: ${C.email}`),w.success(`Usu√°rio ${C.email} exclu√≠do com sucesso (simula√ß√£o)`);else{const j=await ot(C.id,C.email,o);if(j.success)w.success(j.message),console.log("‚úÖ Exclus√£o conclu√≠da:",j.deletedData);else{w.error(j.message);return}}const m=await J();d(m),V()}catch(m){console.error("Erro ao excluir usu√°rio:",m),w.error("Erro ao excluir usu√°rio. Tente novamente.")}finally{We(!1)}};return e.jsxs(Hs,{defaultValue:"analytics",className:"w-full",children:[e.jsxs(_s,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(be,{value:"analytics",className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Dashboard Avan√ßado"]}),e.jsxs(be,{value:"dashboard",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Resultados & Estat√≠sticas"]}),e.jsxs(be,{value:"plans",className:"flex items-center gap-2",children:[e.jsx(Ls,{className:"h-4 w-4"}),"Gerenciar Planos"]})]}),e.jsxs(ye,{value:"analytics",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Dashboard Avan√ßado"}),e.jsx("p",{className:"text-muted-foreground",children:"An√°lise completa do desempenho do sistema"})]}),e.jsxs(A,{onClick:Ge,variant:"outline",size:"sm",disabled:a,className:"flex items-center gap-2",children:[e.jsx(ae,{className:`h-4 w-4 ${a?"animate-spin":""}`}),"Atualizar"]})]}),a?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[...Array(4)].map((s,m)=>e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/3"})]})},m))}):t?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsx(p,{className:"p-6 border-l-4 border-l-emerald-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receita Hoje"}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:["R$ ",t.revenueToday.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.revenueToday>0?"Receitas do dia atual":"Nenhuma receita hoje"})]}),e.jsx(ge,{className:"h-8 w-8 text-emerald-500"})]})}),e.jsx(p,{className:"p-6 border-l-4 border-l-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receita Semana"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["R$ ",t.revenueWeek.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"√öltimos 7 dias"})]}),e.jsx(K,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(p,{className:"p-6 border-l-4 border-l-purple-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receita M√™s"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["R$ ",t.revenueMonth.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"√öltimos 30 dias"})]}),e.jsx(te,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx(p,{className:"p-6 border-l-4 border-l-orange-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Melhor Dia"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.bestDay.date}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["R$ ",t.bestDay.revenue.toLocaleString("pt-BR",{minimumFractionDigits:2})," em vendas"]})]}),e.jsx(ae,{className:"h-8 w-8 text-orange-500"})]})})]}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsx(p,{className:"p-6 border-l-4 border-l-emerald-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receita Hoje"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:"R$ 0,00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Nenhuma receita hoje"})]}),e.jsx(ge,{className:"h-8 w-8 text-emerald-500"})]})}),e.jsx(p,{className:"p-6 border-l-4 border-l-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receita Semana"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"R$ 0,00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"√öltimos 7 dias"})]}),e.jsx(K,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(p,{className:"p-6 border-l-4 border-l-purple-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receita M√™s"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"R$ 0,00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"√öltimos 30 dias"})]}),e.jsx(te,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx(p,{className:"p-6 border-l-4 border-l-orange-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Melhor Dia"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Nenhuma receita registrada"})]}),e.jsx(ae,{className:"h-8 w-8 text-orange-500"})]})})]}),e.jsxs(p,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Vendas Mensais"]}),e.jsx("div",{className:"h-64 flex items-center justify-center bg-muted/20 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-32 h-32 mx-auto mb-4 bg-gradient-primary rounded-lg flex items-center justify-center",children:e.jsx(K,{className:"h-16 w-16 text-white"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gr√°fico de vendas mensais ser√° implementado aqui"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Mostrando vendas dos √∫ltimos 12 meses"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(p,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Receita Total: R$ ",t?.totalRevenue.toLocaleString("pt-BR",{minimumFractionDigits:2})||"0,00"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Receita Hoje"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-muted rounded-full",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:t?`${Math.min(t.revenueToday/Math.max(t.totalRevenue,1)*100,100)}%`:"0%"}})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["R$ ",t?.revenueToday.toLocaleString("pt-BR",{minimumFractionDigits:2})||"0,00"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Receita Semanal"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-muted rounded-full",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:t?`${Math.min(t.revenueWeek/Math.max(t.totalRevenue,1)*100,100)}%`:"0%"}})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["R$ ",t?.revenueWeek.toLocaleString("pt-BR",{minimumFractionDigits:2})||"0,00"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Receita Mensal"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-muted rounded-full",children:e.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:t?`${Math.min(t.revenueMonth/Math.max(t.totalRevenue,1)*100,100)}%`:"0%"}})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["R$ ",t?.revenueMonth.toLocaleString("pt-BR",{minimumFractionDigits:2})||"0,00"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Melhor Dia"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-orange-600",children:t?.bestDay.date||"N/A"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["R$ ",t?.bestDay.revenue.toLocaleString("pt-BR",{minimumFractionDigits:2})||"0,00"]})]})]}),t&&t.totalRevenue===0&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma receita registrada ainda"})})]})]}),e.jsxs(p,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),"Planos Mais Populares"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Ultimate"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 h-2 bg-muted rounded-full",children:e.jsx("div",{className:"w-2/3 h-full bg-primary rounded-full"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"2 usu√°rios (67%)"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Standard"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 h-2 bg-muted rounded-full",children:e.jsx("div",{className:"w-1/3 h-full bg-blue-500 rounded-full"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"1 usu√°rio (33%)"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Medium"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 h-2 bg-muted rounded-full",children:e.jsx("div",{className:"w-0 h-full bg-muted-foreground rounded-full"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"0 usu√°rios (0%)"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Free"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 h-2 bg-muted rounded-full",children:e.jsx("div",{className:"w-0 h-full bg-muted-foreground rounded-full"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"0 usu√°rios (0%)"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs(p,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Crescimento de Usu√°rios"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Este M√™s"}),e.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"+3 usu√°rios"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"M√™s Anterior"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"+0 usu√°rios"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Crescimento"}),e.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"‚àû% ‚ÜóÔ∏è"})]})]})]}),e.jsxs(p,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"M√©tricas de Engajamento"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Taxa de Convers√£o"}),e.jsx("span",{className:"text-sm font-semibold text-primary",children:"100%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Usu√°rios Ativos"}),e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"3/3"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Reten√ß√£o"}),e.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"100%"})]})]})]}),e.jsxs(p,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Proje√ß√µes"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Pr√≥ximo M√™s"}),e.jsx("span",{className:"text-sm font-semibold text-purple-600",children:"R$ 31,00"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Meta Anual"}),e.jsx("span",{className:"text-sm font-semibold text-orange-600",children:"R$ 372,00"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Crescimento Esperado"}),e.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"+3,300%"})]})]})]})]}),e.jsxs(p,{className:"p-6 border-l-4 border-l-yellow-500",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5 text-yellow-500"}),"Alertas e Recomenda√ß√µes"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"üéØ Oportunidade:"})," Considere criar campanhas de marketing para o plano Medium, que ainda n√£o tem usu√°rios."]})}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"üìà Tend√™ncia:"})," O plano Ultimate est√° sendo o mais escolhido. Considere criar um plano ainda mais premium."]})}),e.jsx("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:e.jsxs("p",{className:"text-sm text-emerald-800 dark:text-emerald-200",children:[e.jsx("strong",{children:"‚úÖ Excelente:"})," Taxa de convers√£o de 100% indica que o produto est√° bem posicionado no mercado."]})})]})]})]}),e.jsxs(ye,{value:"dashboard",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Resultados & Estat√≠sticas"}),e.jsx("p",{className:"text-muted-foreground",children:"Vis√£o geral do desempenho do sistema"})]}),e.jsxs(A,{onClick:Ge,variant:"outline",size:"sm",disabled:a,className:"flex items-center gap-2",children:[e.jsx(ae,{className:`h-4 w-4 ${a?"animate-spin":""}`}),"Atualizar"]})]}),n&&e.jsxs(we,{variant:"destructive",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(Ae,{children:n})]}),a?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((s,m)=>e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/3"})]})},m))}):t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(ie,{title:"Total de Usu√°rios",value:t.totalUsers.toLocaleString(),icon:fe,trend:{value:t.growthRate,isPositive:t.growthRate>0}}),e.jsx(ie,{title:"Usu√°rios Ativos",value:t.activeUsers.toLocaleString(),icon:re}),e.jsx(ie,{title:"Receita Total",value:`R$ ${t.totalRevenue.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:ge}),e.jsx(ie,{title:"Taxa de Crescimento",value:`${t.growthRate.toFixed(1)}%`,icon:K,trend:{value:t.growthRate,isPositive:t.growthRate>0}})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(p,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Distribui√ß√£o de Planos"}),a?e.jsx("div",{className:"space-y-3",children:[...Array(4)].map((s,m)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-16 animate-pulse"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-48 h-2 bg-muted rounded-full animate-pulse"}),e.jsx("div",{className:"h-4 bg-muted rounded w-8 animate-pulse"})]})]},m))}):t?e.jsx("div",{className:"space-y-4",children:Object.entries(t.planDistribution).map(([s,m])=>{const j=t.totalUsers>0?m/t.totalUsers*100:0,N=se.find(g=>g.id===s);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:N?.name||s}),e.jsxs(E,{variant:"outline",className:"text-xs",children:[m," usu√°rios"]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[j.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500",style:{width:`${j}%`}})})]},s)})}):null]}),e.jsxs(p,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Atividade Recente"}),a?e.jsx("div",{className:"space-y-3",children:[...Array(4)].map((s,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-muted rounded w-16 animate-pulse"})]},m))}):t?e.jsx("div",{className:"space-y-3",children:t.recentActivity.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma atividade recente"}):t.recentActivity.map((s,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("span",{className:"text-sm",children:s.action}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.time})]},m))}):null]})]}),e.jsxs(p,{className:"shadow-card",children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Usu√°rios do Sistema (",pe.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(G,{placeholder:"Buscar usu√°rios...",className:"w-64 pl-10",value:y,onChange:s=>z(s.target.value)})]}),e.jsx(A,{variant:"outline",children:"Filtros"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:x?e.jsxs("div",{className:"p-4 sm:p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando usu√°rios..."})]}):e.jsx("div",{className:"min-w-full",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-semibold",children:"Usu√°rio"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Email"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Plano"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Expira em"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Registrado em"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"A√ß√µes"})]})}),e.jsx("tbody",{children:pe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:y?"Nenhum usu√°rio encontrado para a busca.":"Nenhum usu√°rio encontrado."})}):pe.map(s=>e.jsxs("tr",{className:"border-t border-border hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"p-4 font-medium",children:s.name}),e.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:s.email}),e.jsx("td",{className:"p-4",children:e.jsx(E,{variant:s.plan==="free"?"secondary":"default",className:"capitalize",children:s.plan})}),e.jsx("td",{className:"p-4",children:e.jsx(E,{variant:s.status==="active"?"default":"secondary",children:s.status==="active"?"Ativo":"Inativo"})}),e.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:s.planExpirationDate?s.planExpirationDate.toDate?s.planExpirationDate.toDate().toLocaleDateString("pt-BR"):new Date(s.planExpirationDate).toLocaleDateString("pt-BR"):s.plan==="free"?"N/A":"N√£o definido"}),e.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:s.createdAt?s.createdAt.toDate?s.createdAt.toDate().toLocaleDateString("pt-BR"):new Date(s.createdAt).toLocaleDateString("pt-BR"):"N/A"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(A,{size:"sm",variant:"outline",onClick:()=>Ke(s),className:"flex items-center gap-1",children:[e.jsx(je,{className:"h-3 w-3"}),"Editar"]}),e.jsxs(A,{size:"sm",variant:"outline",onClick:()=>Ps(s),className:"flex items-center gap-1",children:[e.jsx(Ze,{className:"h-3 w-3"}),"Ver Detalhes"]}),e.jsxs(A,{size:"sm",variant:"destructive",onClick:()=>Us(s),className:"flex items-center gap-1",disabled:!ws(s.id),children:[e.jsx(Ne,{className:"h-3 w-3"}),"Excluir"]})]})})]},s.id))})]})})})]})]}),e.jsxs(ye,{value:"plans",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciamento de Planos"}),e.jsx("p",{className:"text-muted-foreground",children:"Alterar planos de usu√°rios por email"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(p,{className:"p-6 relative z-50",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5"}),"Alterar Plano de Usu√°rio"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Email do Usu√°rio"}),e.jsx("div",{className:"mt-1",children:e.jsx(ds,{placeholder:"Digite o email do usu√°rio",onUserSelect:s=>{B(s.email),Q({uid:s.uid,email:s.email,displayName:s.displayName})},onSearch:s=>{B(s),As()}})})]}),F&&e.jsxs(we,{children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx(Ae,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",F.name||"Nome n√£o informado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",F.email||"Email n√£o informado"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Plano Atual:"}),e.jsx(E,{className:"capitalize",children:F.currentPlan||"free"})]})]})})]}),F&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"newPlan",children:"Novo Plano"}),e.jsxs(Xe,{value:R,onValueChange:M,children:[e.jsx(Ye,{className:"mt-1",children:e.jsx(Qe,{placeholder:"Selecione o novo plano"})}),e.jsx(es,{children:se.map(s=>e.jsx(ss,{value:s.id,disabled:s.id===F.currentPlan,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:s.name}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["R$ ",s.price.toFixed(2)]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"reason",children:"Motivo da Altera√ß√£o (opcional)"}),e.jsx(ts,{id:"reason",placeholder:"Ex: Upgrade promocional, corre√ß√£o de problema, etc.",value:u,onChange:s=>b(s.target.value),className:"mt-1"})]}),R&&R!=="free"&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"subscriptionMonths",children:"Meses de Assinatura"}),e.jsx(G,{id:"subscriptionMonths",type:"number",placeholder:"Ex: 12 (para 1 ano)",value:O,onChange:s=>Y(parseInt(s.target.value)||0),className:"mt-1",min:"1",max:"120"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Deixe vazio para n√£o definir per√≠odo espec√≠fico"})]}),e.jsx(A,{onClick:Ds,disabled:f||!R||R===F.currentPlan,className:"w-full",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Alterando Plano..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Alterar Plano"]})})]})]})]}),e.jsxs(p,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5"}),"Hist√≥rico de Altera√ß√µes"]}),k?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((s,m)=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/4"})]})},m))}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:$.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma altera√ß√£o de plano registrada"}):$.map(s=>e.jsx("div",{className:"p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:s.userEmail}),e.jsx(E,{variant:"outline",className:"text-xs",children:s.newPlan})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.previousPlan," ‚Üí ",s.newPlan]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Alterado por: ",s.updatedBy||s.changedBy]}),s.reason&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Motivo: ",s.reason]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.createdAt?.toDate?s.createdAt.toDate().toLocaleString("pt-BR"):new Date(s.createdAt).toLocaleString("pt-BR")})]})},s.id))})]})]}),e.jsxs(p,{className:"p-6 relative z-10",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Gerenciar Administradores"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Email do Usu√°rio para Promover"}),e.jsx("div",{className:"mt-1",children:e.jsx(ds,{placeholder:"Digite o email do usu√°rio",onUserSelect:s=>{ne(s.email),ee({uid:s.uid,email:s.email,displayName:s.displayName})},onSearch:s=>{ne(s),Ss()}})})]}),q&&e.jsxs(we,{children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx(Ae,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",q.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",q.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(E,{className:"ml-2",variant:"outline",children:"Usu√°rio Regular"})]})]})})]}),q&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"adminReason",children:"Motivo da Promo√ß√£o (opcional)"}),e.jsx(ts,{id:"adminReason",placeholder:"Ex: Respons√°vel pela equipe, suporte t√©cnico, etc.",value:Le,onChange:s=>Be(s.target.value),className:"mt-1"})]}),e.jsx(A,{onClick:Es,disabled:Me,className:"w-full bg-gradient-primary",children:Me?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Promovendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Promover a Administrador"]})})]})]})]}),e.jsxs(p,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"Administradores Atuais"]}),Ns?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((s,m)=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},m))}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:ze.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhum administrador encontrado"}):ze.map(s=>e.jsx("div",{className:"p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s.email}),e.jsx(E,{variant:"default",className:"bg-gradient-primary",children:"Admin"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Promovido por: ",s.promotedBy||"Sistema"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.addedAt?s.addedAt.toDate?s.addedAt.toDate().toLocaleString("pt-BR"):s.addedAt.toString():"Data n√£o dispon√≠vel"})]}),s.email!==o?.email&&s.userId!=="hardcoded"&&e.jsx(A,{size:"sm",variant:"destructive",onClick:()=>Rs(s.email),children:"Remover Admin"})]})},s.userId))})]}),e.jsxs(p,{className:"p-6 lg:col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Planos Dispon√≠veis"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:se.map(s=>e.jsx("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:s.name}),e.jsxs(E,{variant:s.price===0?"secondary":"default",children:["R$ ",s.price.toFixed(2)]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:s.features.map((m,j)=>e.jsxs("li",{className:"flex items-center gap-1",children:[e.jsx(ve,{className:"h-3 w-3 text-green-500"}),m]},j))})]})},s.id))})]})]}),e.jsx(De,{open:vs,onOpenChange:me,children:e.jsxs(Se,{className:"max-w-2xl",children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Editar Usu√°rio: ",h?.name]})}),h&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Nome"}),e.jsx(G,{value:h.name,readOnly:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Email"}),e.jsx(G,{value:h.email,readOnly:!0,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Plano Atual"}),e.jsx("div",{className:"mt-1",children:e.jsx(E,{className:"capitalize",children:h.plan})})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(E,{variant:h.status==="active"?"default":"secondary",children:h.status==="active"?"Ativo":"Inativo"})})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Alterar Plano"}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs(Xe,{defaultValue:h.plan,onValueChange:s=>{console.log("Alterando plano para:",s)},children:[e.jsx(Ye,{className:"flex-1",children:e.jsx(Qe,{})}),e.jsx(es,{children:se.map(s=>e.jsxs(ss,{value:s.id,children:[s.name," - R$ ",s.price.toFixed(2)]},s.id))})]}),e.jsxs(A,{size:"sm",variant:"outline",children:[e.jsx(ve,{className:"h-4 w-4 mr-1"}),"Aplicar"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(A,{variant:"outline",onClick:V,children:"Cancelar"}),e.jsx(A,{onClick:V,children:"Salvar Altera√ß√µes"})]})]})]})}),e.jsx(De,{open:bs,onOpenChange:ue,children:e.jsxs(Se,{className:"max-w-4xl",children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Detalhes do Usu√°rio: ",h?.name]})}),h&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(p,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Informa√ß√µes Pessoais"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Nome:"})," ",h.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",h.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ID:"})," ",e.jsx("code",{className:"text-xs",children:h.id})]})]})]}),e.jsxs(p,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Status da Conta"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Plano:"}),e.jsx(E,{className:"capitalize",children:h.plan})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Status:"}),e.jsx(E,{variant:h.status==="active"?"default":"secondary",children:h.status==="active"?"Ativo":"Inativo"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Plano expira em:"})," ",h.planExpirationDate?h.planExpirationDate.toDate?h.planExpirationDate.toDate().toLocaleDateString("pt-BR"):new Date(h.planExpirationDate).toLocaleDateString("pt-BR"):h.plan==="free"?"N/A":"N√£o definido"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Registrado em:"})," ",h.createdAt?h.createdAt.toDate?h.createdAt.toDate().toLocaleDateString("pt-BR"):new Date(h.createdAt).toLocaleDateString("pt-BR"):"N/A"]}),h.lastLogin&&e.jsxs("div",{children:[e.jsx("strong",{children:"√öltimo acesso:"})," ",h.lastLogin.toDate?h.lastLogin.toDate().toLocaleDateString("pt-BR"):new Date(h.lastLogin).toLocaleDateString("pt-BR")]})]})]})]}),e.jsxs(p,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Estat√≠sticas de Uso"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"font-semibold text-lg",children:"-"}),e.jsx("div",{className:"text-muted-foreground",children:"Transa√ß√µes"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"font-semibold text-lg",children:"-"}),e.jsx("div",{className:"text-muted-foreground",children:"Funcion√°rios"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"font-semibold text-lg",children:"-"}),e.jsx("div",{className:"text-muted-foreground",children:"Relat√≥rios"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"font-semibold text-lg",children:"-"}),e.jsx("div",{className:"text-muted-foreground",children:"Dias Ativo"})]})]})]}),e.jsxs(p,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Atividades Recentes"}),e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"Hist√≥rico de atividades em desenvolvimento"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(A,{variant:"outline",onClick:V,children:"Fechar"}),e.jsxs(A,{onClick:()=>{V(),Ke(h)},children:[e.jsx(je,{className:"h-4 w-4 mr-1"}),"Editar Usu√°rio"]})]})]})]})}),e.jsx(De,{open:ys,onOpenChange:xe,children:e.jsxs(Se,{className:"max-w-md",children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Confirmar Exclus√£o de Usu√°rio"]})}),C&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-destructive font-medium mb-2",children:"‚ö†Ô∏è Aten√ß√£o: Esta a√ß√£o n√£o pode ser desfeita"}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Todos os dados do usu√°rio ser√£o exclu√≠dos permanentemente"}),e.jsx("li",{children:"‚Ä¢ Hist√≥rico de transa√ß√µes ser√° removido"}),e.jsx("li",{children:"‚Ä¢ Configura√ß√µes e prefer√™ncias ser√£o perdidas"}),e.jsx("li",{children:"‚Ä¢ Acesso ao sistema ser√° revogado"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Usu√°rio a ser exclu√≠do:"}),e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:C.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.email}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Plano: ",C.plan]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",e.jsx("code",{className:"text-xs",children:C.id})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Dados que ser√£o exclu√≠dos:"}),e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg space-y-1",children:[e.jsx("p",{className:"text-sm",children:"‚Ä¢ Perfil e configura√ß√µes do usu√°rio"}),e.jsx("p",{className:"text-sm",children:"‚Ä¢ Todos os funcion√°rios cadastrados"}),e.jsx("p",{className:"text-sm",children:"‚Ä¢ Hist√≥rico completo de transa√ß√µes"}),e.jsx("p",{className:"text-sm",children:"‚Ä¢ Plataformas de apostas configuradas"}),e.jsx("p",{className:"text-sm",children:"‚Ä¢ Hist√≥rico de altera√ß√µes de plano"}),e.jsx("p",{className:"text-sm",children:"‚Ä¢ Acesso ao sistema ser√° revogado"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(T,{htmlFor:"deleteConfirmation",children:["Para confirmar, digite ",e.jsx("strong",{children:"excluir"}),":"]}),e.jsx(G,{id:"deleteConfirmation",placeholder:"Digite 'excluir' para confirmar",value:he,onChange:s=>qe(s.target.value),className:"border-destructive/50 focus:border-destructive"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(A,{variant:"outline",onClick:V,children:"Cancelar"}),e.jsx(A,{variant:"destructive",onClick:ks,disabled:Ve||he.toLowerCase()!=="excluir",children:Ve?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Excluindo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"Excluir Usu√°rio"]})})]})]})]})})]})},Bt=()=>{const{user:o,isAdmin:i}=ms();return e.jsx(Fs,{children:e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx(E,{className:"rounded-full bg-primary/10 px-4 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.35em] text-primary mb-4",children:"Administra√ß√£o"}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Painel Administrativo"}),i&&e.jsxs(E,{variant:"default",className:"flex items-center gap-1 bg-gradient-primary",children:[e.jsx(ke,{className:"h-3 w-3"}),"Admin"]})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Gerencie usu√°rios e configura√ß√µes do sistema ‚Ä¢ Acesso restrito ‚Ä¢ ",o?.email]})]}),e.jsx(mt,{})]})})};export{Bt as default};
