import{j as e,a6 as C,a7 as D,p as j,i as t}from"./ui-vendor-BTHa3W3g.js";import{u as P,r as p}from"./react-vendor-a_rYd-gI.js";import{D as y,A,i as w,a as S,b as U,c as E,d as z,e as F,f as L,g as T}from"./DashboardLayout-CBEB3xAj.js";import{i as k,l as R,C as l,j as u,B as i,F as I}from"./index-tUWBtyMw.js";import{L as o}from"./label-Bd_WgLui.js";import{I as d}from"./input-DW9y-Xvy.js";import{F as V}from"./firebase-vendor-D8A9P6qX.js";import{d as B}from"./user-subcollections.service-BuAugs-p.js";import"./index-DFZ8kcLn.js";import"./chart-vendor-CfBne3GF.js";const X=()=>{const{user:r,logout:O}=k(),{currentPlan:a}=R(),n=P(),[m,x]=p.useState(""),[f,h]=p.useState(!1),g=()=>{t.success("Perfil atualizado com sucesso!")},N=async()=>{if(m.toLowerCase()!=="sim"){t.error('Digite "sim" para confirmar a exclusão');return}try{const s=I.currentUser,c=s?.uid;if(!s||!c){t.error("Usuário não autenticado");return}await B(c),await V(s),t.success("Conta excluída com sucesso"),h(!1),x(""),n("/")}catch(s){s?.code==="auth/requires-recent-login"?t.error("Por segurança, faça login novamente e tente excluir a conta."):t.error("Não foi possível excluir a conta. Tente novamente.")}},v=()=>{h(!0),x("")},b=[{date:"2024-10-01",plan:"Ultimate",amount:199,status:"paid"},{date:"2024-09-01",plan:"Ultimate",amount:199,status:"paid"},{date:"2024-08-01",plan:"Standard",amount:49,status:"paid"}];return e.jsx(y,{children:e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Meu Perfil"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie suas informações pessoais"})]}),e.jsx(l,{className:"p-6 shadow-card",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:e.jsx(C,{className:"h-16 w-16 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:r?.name}),e.jsx(u,{variant:"default",className:"capitalize",children:a}),r?.isAdmin&&e.jsx(u,{variant:"secondary",children:"Admin"})]}),e.jsx("p",{className:"text-muted-foreground mb-4",children:r?.email}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>n("/planos"),children:"Gerenciar Plano"})]})]})}),e.jsxs(l,{className:"p-6 shadow-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Informações Pessoais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Nome Completo"}),e.jsx(d,{defaultValue:r?.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Email"}),e.jsx(d,{type:"email",defaultValue:r?.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Telefone"}),e.jsx(d,{type:"tel",placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"CPF/CNPJ"}),e.jsx(d,{placeholder:"000.000.000-00"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(i,{onClick:g,children:"Salvar Alterações"})})]}),e.jsxs(l,{className:"p-6 shadow-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(D,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Plano Atual"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Plano"}),e.jsx("p",{className:"text-xl font-bold capitalize",children:a})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:a==="free"?"Status":"Plano expira em"}),e.jsx("p",{className:"text-xl font-bold",children:a==="free"?"Ativo":"31/12/2025"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Valor Mensal"}),e.jsx("p",{className:"text-xl font-bold",children:a==="free"?"Grátis":a==="standard"?"R$ 1,00":a==="medium"?"R$ 49,90":"R$ 99,90"})]})]}),e.jsx(i,{variant:"outline",onClick:()=>n("/planos"),children:"Alterar Plano"})]}),e.jsxs(l,{className:"shadow-card",children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Histórico de Pagamentos"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-semibold",children:"Data"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Plano"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Valor"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Nota Fiscal"})]})}),e.jsx("tbody",{children:b.map((s,c)=>e.jsxs("tr",{className:"border-t border-border hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:new Date(s.date).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"p-4",children:s.plan}),e.jsxs("td",{className:"p-4 font-semibold",children:["R$ ",s.amount]}),e.jsx("td",{className:"p-4",children:e.jsx(u,{variant:"default",children:"Pago"})}),e.jsx("td",{className:"p-4",children:e.jsx(i,{variant:"ghost",size:"sm",children:"Download"})})]},c))})]})})]}),e.jsxs(l,{className:"p-6 shadow-card border-destructive/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{className:"h-5 w-5 text-destructive"}),e.jsx("h3",{className:"text-lg font-semibold text-destructive",children:"Zona de Perigo"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Uma vez que você exclua sua conta, não há como voltar atrás. Por favor, tenha certeza."}),e.jsxs(A,{open:f,onOpenChange:h,children:[e.jsx(w,{asChild:!0,children:e.jsx(i,{variant:"destructive",onClick:v,children:"Excluir Conta"})}),e.jsxs(S,{className:"bg-card border-border",children:[e.jsxs(U,{children:[e.jsxs(E,{className:"text-foreground flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-destructive"}),"Confirmar Exclusão de Conta"]}),e.jsxs(z,{className:"text-muted-foreground",children:["Esta ação é ",e.jsx("strong",{children:"irreversível"}),". Todos os seus dados serão permanentemente excluídos."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-destructive font-medium mb-2",children:"⚠️ Atenção: Esta ação não pode ser desfeita"}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Todos os seus dados serão excluídos permanentemente"}),e.jsx("li",{children:"• Seu histórico de transações será perdido"}),e.jsx("li",{children:"• Suas configurações serão removidas"}),e.jsx("li",{children:"• Você precisará criar uma nova conta para usar o sistema"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"deleteConfirmation",className:"text-sm font-medium text-foreground",children:["Para confirmar, digite ",e.jsx("strong",{children:'"sim"'})," abaixo:"]}),e.jsx(d,{id:"deleteConfirmation",type:"text",placeholder:"Digite 'sim' para confirmar",value:m,onChange:s=>x(s.target.value),className:"border-destructive/50 focus:border-destructive"})]})]}),e.jsxs(F,{children:[e.jsx(L,{className:"bg-muted hover:bg-muted/80 text-foreground border-border",children:"Cancelar"}),e.jsx(T,{onClick:N,disabled:m.toLowerCase()!=="sim",className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground disabled:opacity-50 disabled:cursor-not-allowed",children:"Excluir Conta Permanentemente"})]})]})]})]})]})})};export{X as default};
