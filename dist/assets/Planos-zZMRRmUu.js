import{Y as j,j as e,a as A,i as x,m as t,U as d,e as p,C as N,S as R,_ as E,Z as v}from"./ui-vendor-BTHa3W3g.js";import{r as C}from"./react-vendor-a_rYd-gI.js";import{D as y}from"./DashboardLayout-D0U5gXbg.js";import{i as S,l as _,j as f,C as k,B as I}from"./index-CK_VcXmi.js";import{S as D}from"./switch-QQ72B82p.js";import"./firebase-vendor-D8A9P6qX.js";import"./input-DNUTw7Z-.js";import"./index-DRrHU6GR.js";import"./chart-vendor-CfBne3GF.js";import"./index-CdAzXW5_.js";const u={FIREBASE_API_KEY:"AIzaSyD3Z8Z8Z8Z8Z8Z8Z8Z8Z8Z8Z8Z8Z8Z8Z8",FIREBASE_AUTH_DOMAIN:"optify-definitivo.firebaseapp.com",FIREBASE_PROJECT_ID:"optify-definitivo",FIREBASE_STORAGE_BUCKET:"optify-definitivo.appspot.com",FIREBASE_MESSAGING_SENDER_ID:"123456789",FIREBASE_APP_ID:"1:123456789:web:abcdef123456",MERCADO_PAGO_PUBLIC_KEY:"APP_USR-9ca765f9-6a73-47a9-ab3d-0923791c2a4f",API_URL:"https://us-central1-optify-definitivo.cloudfunctions.net"};function w(){return j({mutationFn:async o=>{console.log("üîç Hook - URL da API:",u.API_URL),console.log("üîç Hook - Payload:",o);const r=await fetch(`${u.API_URL}/createPaymentPreference`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(console.log("üîç Hook - Status da resposta:",r.status),console.log("üîç Hook - Headers da resposta:",Object.fromEntries(r.headers.entries())),!r.ok){const n=await r.json().catch(()=>({}));throw console.error("üîç Hook - Erro da API:",n),new Error(n.error||"Erro ao criar prefer√™ncia")}const i=await r.json();return console.log("üîç Hook - Resposta da API:",i),i},onError:o=>{console.error("‚ùå Hook - Erro na mutation:",o)}})}const q=()=>{const{user:o}=S(),{currentPlan:r}=_(),[i,n]=C.useState(!1),m=w(),h={free:0,standard:1,medium:2,ultimate:3},c=a=>{const s=h[r]||0;return(h[a]||0)<s},l={free:[{text:"Dashboard b√°sico",icon:t},{text:"Resumo do dia",icon:t},{text:"Cadastro de 1 funcion√°rio",icon:d},{text:"Registro de transa√ß√µes do dia atual",icon:t},{text:"Dep√≥sitos e saques b√°sicos",icon:t},{text:"Visualiza√ß√£o do calend√°rio (m√™s atual)",icon:t},{text:"Calend√°rio Anterior",icon:t,blocked:!0},{text:"Pagamentos",icon:t,blocked:!0},{text:"Relat√≥rios",icon:t,blocked:!0},{text:"Saldo de Contas",icon:t,blocked:!0},{text:"Hist√≥rico",icon:t,blocked:!0}],standard:[{text:"Dashboard b√°sico",icon:t},{text:"Resumo do dia",icon:t},{text:"Cadastro de at√© 5 funcion√°rios",icon:d},{text:"Registro de transa√ß√µes do dia atual",icon:t},{text:"Dep√≥sitos e saques",icon:t},{text:"Relat√≥rios b√°sicos",icon:p},{text:"Visualiza√ß√£o do calend√°rio (m√™s atual)",icon:t},{text:"Suporte por email",icon:t},{text:"Calend√°rio Anterior",icon:t,blocked:!0},{text:"Pagamentos",icon:t,blocked:!0},{text:"Saldo de Contas",icon:t,blocked:!0},{text:"Hist√≥rico",icon:t,blocked:!0}],medium:[{text:"Dashboard completo",icon:t},{text:"Resumo do dia",icon:t},{text:"Cadastro de at√© 10 funcion√°rios",icon:d},{text:"Registro de transa√ß√µes",icon:t},{text:"Dep√≥sitos e saques",icon:t},{text:"Calend√°rio Anterior",icon:t},{text:"Pagamentos",icon:t},{text:"Relat√≥rios avan√ßados",icon:p},{text:"Saldo de Contas",icon:t},{text:"Hist√≥rico completo",icon:t}],ultimate:[{text:"Dashboard completo e avan√ßado",icon:t},{text:"Resumo do dia",icon:t},{text:"Cadastro de at√© 50 funcion√°rios",icon:d},{text:"Registro de transa√ß√µes ilimitadas",icon:t},{text:"Dep√≥sitos e saques",icon:t},{text:"Calend√°rio Anterior",icon:t},{text:"Pagamentos",icon:t},{text:"Relat√≥rios avan√ßados",icon:p},{text:"Saldo de Contas",icon:t},{text:"Hist√≥rico completo",icon:t},{text:"CPA Chinesa",icon:N,exclusive:!0},{text:"Painel Avan√ßado",icon:R,exclusive:!0},{text:"Dutchuing Bot",icon:E,exclusive:!0},{text:"Integra√ß√µes avan√ßadas",icon:v,exclusive:!0},{text:"API personalizada",icon:v,exclusive:!0},{text:"Suporte priorit√°rio",icon:t,exclusive:!0},{text:"Suporte dedicado",icon:t,exclusive:!0}]},P=async a=>{if(!o){x.error("Voc√™ precisa estar logado para assinar um plano");return}if(a==="free"){x.error("O plano Free j√° est√° ativo");return}try{console.log("üîç Debug - Vari√°veis de ambiente:",{API_URL:u.API_URL,PUBLIC_KEY:u.MERCADO_PAGO_PUBLIC_KEY}),console.log("üîç Debug - Dados do payload:",{userId:o.uid,userEmail:o.email||"",userName:o.displayName||o.email?.split("@")[0]||"Usu√°rio",planId:a,billingType:i?"annual":"monthly"});const s=await m.mutateAsync({userId:o.uid,userEmail:o.email||"",userName:o.displayName||o.email?.split("@")[0]||"Usu√°rio",planId:a,billingType:i?"annual":"monthly"});console.log("‚úÖ Prefer√™ncia criada:",s),window.location.href=s.init_point}catch(s){console.error("‚ùå Erro ao criar prefer√™ncia:",s),x.error("Erro ao processar pagamento. Tente novamente.")}},b=[{name:"Free",value:"free",price:0,period:"Gr√°tis",annualPrice:0,features:l.free,current:r==="free",popular:!1,description:"Testar o sistema"},{name:"Standard",value:"standard",price:1,period:"m√™s",annualPrice:10.2,features:l.standard,current:r==="standard",popular:!1,description:"Pequenos neg√≥cios"},{name:"Medium",value:"medium",price:49.9,period:"m√™s",annualPrice:509.16,features:l.medium,current:r==="medium",popular:!0,description:"M√©dias empresas"},{name:"Ultimate",value:"ultimate",price:99.9,period:"m√™s",annualPrice:1,features:l.ultimate,current:r==="ultimate",popular:!1,description:"Grandes empresas"}];return e.jsx(y,{children:e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Escolha seu Plano"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Selecione o plano ideal para o seu neg√≥cio"}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:i?"text-muted-foreground":"font-semibold",children:"Mensal"}),e.jsx(D,{checked:i,onCheckedChange:n}),e.jsxs("span",{className:i?"font-semibold":"text-muted-foreground",children:["Anual",e.jsx(f,{variant:"default",className:"ml-2",children:"15% OFF"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:b.map(a=>e.jsxs(k,{className:`
                p-6 relative shadow-card card-hover flex flex-col h-full
                ${a.popular?"border-primary border-2":""}
                ${c(a.value)?"opacity-60":""}
              `,children:[a.popular&&e.jsx(f,{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:"Mais Popular"}),a.current&&e.jsx(f,{variant:"outline",className:"absolute -top-3 left-1/2 -translate-x-1/2",children:"Plano Atual"}),e.jsxs("div",{className:"flex flex-col h-full space-y-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:a.description}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsxs("span",{className:"text-4xl font-bold",children:["R$ ",(i?a.annualPrice/12:a.price).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),a.price>0&&e.jsxs("span",{className:"text-muted-foreground",children:["/",a.period]})]}),i&&a.price>0&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Valor anual: R$ ",a.annualPrice.toLocaleString("pt-BR",{minimumFractionDigits:2}),e.jsx("br",{}),"Economia de R$ ",(a.price*12-a.annualPrice).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsx("div",{className:"flex-grow space-y-3",children:a.features.map((s,g)=>e.jsxs("div",{className:"flex items-start gap-2",children:[s.blocked?e.jsx("div",{className:"h-5 w-5 shrink-0 mt-0.5 rounded-full border-2 border-muted-foreground/30 flex items-center justify-center",children:e.jsx("div",{className:"h-2 w-2 rounded-full bg-muted-foreground/30"})}):e.jsx(s.icon,{className:`h-5 w-5 shrink-0 mt-0.5 ${s.exclusive?"text-primary":"text-success"}`}),e.jsxs("span",{className:`text-sm ${s.blocked?"text-muted-foreground/60":""} ${s.exclusive?"text-primary font-medium":""}`,children:[s.text,s.exclusive&&e.jsx("span",{className:"ml-1 text-xs",children:"(exclusivo)"})]})]},g))}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{className:"w-full",variant:a.current?"outline":"default",disabled:a.current||m.isPending||c(a.value),onClick:()=>!a.current&&!c(a.value)&&P(a.value),children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}),"Redirecionando..."]}):a.current?"Plano Atual":c(a.value)?"Plano Menor":"Assinar"})})]})]},a.name))}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"Todos os planos incluem 7 dias de teste gr√°tis"}),e.jsx("p",{children:"Cancele a qualquer momento, sem taxas adicionais"})]})]})})};export{q as default};
